define(["require", "exports", "../../common/app/main.app", "../../common/Pagination", "../../common/directive/tree/tree-params", "css!module/maintain/css/maintain-deviceStatus.css", "angular", "css!module/maintain/css/maintain-operateLog.css", "../../common/services/maintain.service", "../../common/services/casecade.service", "../main/maintainFactory"], function (require, exports, main_app_1, Pagination_1, tree_params_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.deviceArray = [
        { type: "IvsServer", name: "服务器", status: true },
        { type: "Camera", name: "摄像机", status: false },
        { type: "WiFi", name: "WiFi", status: false },
        { type: "RmpGate", name: "卡口", status: false },
        { type: "EFENCE", name: "电子围栏", status: false }
    ];
    exports.checkLine = [
        { type: "1", name: "在线" },
        { type: "0", name: "离线" }
    ];
    var CasCadeSearchParams = (function () {
        function CasCadeSearchParams() {
            this.orderType = 'ASC';
            this.pageSize = 10;
            this.currentPage = 1;
        }
        return CasCadeSearchParams;
    }());
    exports.CasCadeSearchParams = CasCadeSearchParams;
    var deviceStatusInfo = (function () {
        function deviceStatusInfo() {
        }
        return deviceStatusInfo;
    }());
    exports.deviceStatusInfo = deviceStatusInfo;
    var runOperateLogData = (function () {
        function runOperateLogData() {
        }
        return runOperateLogData;
    }());
    exports.runOperateLogData = runOperateLogData;
    var fieldTitle = (function () {
        function fieldTitle() {
        }
        return fieldTitle;
    }());
    exports.fieldTitle = fieldTitle;
    exports.tHeadList = [
        { field: "Name", title: "FDS_02_02_20", isShow: true },
        { field: "AreaName", title: "FDS_02_02_21", isShow: true },
        { field: "Type", title: "FDS_02_02_22", isShow: true },
        { field: "CameraType", title: "FDS_02_02_27", isShow: true },
        { field: "AlarmNum", title: "FDS_02_02_28", isShow: true },
        { field: "IpAddress", title: "FDS_02_02_23", isShow: true },
        { field: "Status", title: "FDS_02_02_24", isShow: true }
    ];
    var DeviceStatusController = (function () {
        function DeviceStatusController($scope, $timeout, maintainService, layer, casCadeService, maintainFactory) {
            this.$scope = $scope;
            this.$timeout = $timeout;
            this.maintainService = maintainService;
            this.layer = layer;
            this.casCadeService = casCadeService;
            this.maintainFactory = maintainFactory;
            this.deviceArray = exports.deviceArray;
            this.pageParams = new Pagination_1.PageParamsAndResult();
            this.Pagination = new Pagination_1.Pagination();
            this.pageType = 'IvsServer';
            this.tHeadList = this.switchTableTitle(this.pageType);
            this.areaName = "全部";
            this.operatorModules = exports.deviceArray;
            this.checkLine = exports.checkLine;
            this.getTableList(null, 'IvsServer');
            this.initTree();
            this.getTreeList();
        }
        DeviceStatusController.prototype.initTree = function () {
            var _this = this;
            var that = this;
            this.areaTreeDataParams = new tree_params_1.TreeDataParams();
            this.areaTreeDataParams.treeId = 'areaTreeUser';
            this.areaTreeDataParams.isDefaultSelected = true;
            this.areaTreeDataParams.onClick = function (event, treeId, treeNode) {
                _this.areaId = treeNode.ID;
                _this.areaName = treeNode.Name;
                _this.isShowAreaTree = false;
                _this.$timeout(function () {
                    _this.$scope.$apply();
                });
            };
        };
        DeviceStatusController.prototype.getTreeList = function () {
            var that = this;
            that.casCadeService.findAreaList().then(complete);
            function complete(result) {
                that.$timeout(function () {
                    that.areaTreeDataParams.treeDatas = result.data;
                });
            }
        };
        ;
        DeviceStatusController.prototype.getTableTitle = function (arrTitle) {
            var newArrTitle = [];
            exports.tHeadList.forEach(function (item) {
                arrTitle.forEach(function (itemTit) {
                    if (item.field == itemTit) {
                        newArrTitle.push(item);
                    }
                });
            });
            return newArrTitle;
        };
        ;
        DeviceStatusController.prototype.switchTableTitle = function (deviceName) {
            switch (deviceName) {
                case "IvsServer": {
                    return this.getTableTitle(['Name', 'AreaName', 'Type', 'IpAddress', 'Status']);
                }
                case "Camera": {
                    return this.getTableTitle(['Name', 'AreaName', 'CameraType', 'AlarmNum', 'IpAddress', 'Status']);
                }
                default: {
                    return this.getTableTitle(['Name', 'AreaName', 'AlarmNum', 'IpAddress', 'Status']);
                }
            }
        };
        DeviceStatusController.prototype.switchDevicePage = function (deviceName) {
            if (deviceName) {
                this.pageType = deviceName;
                this.tHeadList = this.switchTableTitle(deviceName);
                for (var i = 0; i < this.deviceArray.length; i++) {
                    if (this.deviceArray[i].type == deviceName) {
                        this.deviceArray[i].status = true;
                        this.getTableList(null, deviceName);
                    }
                    else {
                        this.deviceArray[i].status = false;
                    }
                }
            }
        };
        DeviceStatusController.prototype.getTableList = function (Params, deviceName) {
            var that = this;
            var casCadeSearchParams = new CasCadeSearchParams();
            casCadeSearchParams.searchType = deviceName;
            that.pageParams = new Pagination_1.PageParamsAndResult();
            that.pageParams.data = [];
            if (Params) {
                casCadeSearchParams = Params;
            }
            if (casCadeSearchParams.searchType === "IvsServer") {
                casCadeSearchParams.searchType = "";
                this.maintainService.getServerStatusModule(casCadeSearchParams).then(complete);
            }
            else {
                this.maintainService.getDevicesStatusModule(casCadeSearchParams).then(complete);
            }
            function complete(res) {
                console.log(res);
                if (res && res.data && res.data.Result) {
                    var ResultData = res.data;
                    if (Array.isArray(ResultData.Result)) {
                        that.pageParams.totalCount = ResultData.TotalCount;
                        that.pageParams.currentPage = Params ? Params.currentPage : 1;
                        that.pageParams.pageSize = 10;
                        that.pageParams.pageCount = Math.ceil(that.pageParams.totalCount / that.pageParams.pageSize);
                        that.pageParams.data = ResultData.Result;
                        console.log(that.pageParams);
                    }
                }
                else {
                    that.pageParams.data = [];
                    that.layer.msg("\u6CA1\u6709\u6570\u636E");
                }
            }
        };
        DeviceStatusController.prototype.changePage = function (num) {
            var casCadeSearchParams = new CasCadeSearchParams();
            casCadeSearchParams.currentPage = num;
            casCadeSearchParams.searchType = this.pageType;
            casCadeSearchParams.name = this.keyValueInput;
            casCadeSearchParams.type = this.operatorModule;
            casCadeSearchParams.status = this.operatorStatus;
            this.getTableList(casCadeSearchParams, this.pageType);
        };
        DeviceStatusController.prototype.operatorSearch = function () {
            var casCadeSearchParams = new CasCadeSearchParams();
            casCadeSearchParams.currentPage = 1;
            casCadeSearchParams.searchType = this.pageType;
            casCadeSearchParams.name = this.keyValueInput;
            casCadeSearchParams.type = this.operatorModule;
            casCadeSearchParams.status = this.operatorStatus;
            casCadeSearchParams.areaID = this.areaId;
            this.getTableList(casCadeSearchParams, this.pageType);
        };
        DeviceStatusController.prototype.operatorExport = function () {
            var casCadeSearchParams = new CasCadeSearchParams();
            casCadeSearchParams.currentPage = 1;
            casCadeSearchParams.searchType = this.pageType;
            casCadeSearchParams.name = this.keyValueInput;
            casCadeSearchParams.type = this.operatorModule;
            casCadeSearchParams.status = this.operatorStatus;
            casCadeSearchParams.areaID = this.areaId;
            casCadeSearchParams.ifExport = true;
            this.getTableListExport(casCadeSearchParams, this.pageType);
        };
        DeviceStatusController.prototype.getTableListExport = function (Params, deviceName) {
            var that = this;
            var casCadeSearchParams = new CasCadeSearchParams();
            casCadeSearchParams.searchType = deviceName;
            if (Params) {
                casCadeSearchParams = Params;
            }
            if (casCadeSearchParams.searchType === "IvsServer") {
                delete casCadeSearchParams.searchType;
                that.maintainFactory.exportTableXls("/pdp/netManagerCtrl/serverState/export", casCadeSearchParams);
            }
            else {
                that.maintainFactory.exportTableXls("/pdp/netManagerCtrl/deviceState/export", casCadeSearchParams);
            }
        };
        DeviceStatusController.$inject = ['$scope', '$timeout', 'maintainService', 'layer', 'casCadeService', 'maintainFactory'];
        return DeviceStatusController;
    }());
    main_app_1.app.controller("deviceStatusController", DeviceStatusController);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUvbWFpbnRhaW4vZGV2aWNlU3RhdHVzL2RldmljZS5zdGF0dXMuY29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7SUE0QmEsUUFBQSxXQUFXLEdBQUc7UUFDdkIsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtRQUNoRCxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO1FBQzlDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7UUFDN0MsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtRQUM5QyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO0tBQzNCLENBQUM7SUFFWixRQUFBLFNBQVMsR0FBRztRQUNyQixFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRTtRQUN6QixFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRTtLQUNMLENBQUM7SUFFekI7UUFBQTtZQUVJLGNBQVMsR0FBVyxLQUFLLENBQUM7WUFJMUIsYUFBUSxHQUFXLEVBQUUsQ0FBQztZQUN0QixnQkFBVyxHQUFXLENBQUMsQ0FBQztRQUc1QixDQUFDO1FBQUQsMEJBQUM7SUFBRCxDQVZBLEFBVUMsSUFBQTtJQVZZLGtEQUFtQjtJQVloQztRQUFBO1FBWUEsQ0FBQztRQUFELHVCQUFDO0lBQUQsQ0FaQSxBQVlDLElBQUE7SUFaWSw0Q0FBZ0I7SUFjN0I7UUFBQTtRQUdBLENBQUM7UUFBRCx3QkFBQztJQUFELENBSEEsQUFHQyxJQUFBO0lBSFksOENB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SSxHQUEyQixJQUFJLENBQUM7WUFDeEMsSUFBSSxtQkFBbUIsR0FBd0IsSUFBSSxtQkFBbUIsRUFBRSxDQUFDO1lBQ3pFLG1CQUFtQixDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7WUFFNUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDVCxtQkFBbUIsR0FBRyxNQUFNLENBQUE7WUFDaEMsQ0FBQztZQUVELEVBQUUsQ0FBQyxDQUFDLG1CQUFtQixDQUFDLFVBQVUsS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDO2dCQUNqRCxPQUFPLG1CQUFtQixDQUFDLFVBQVUsQ0FBQztnQkFDdEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxjQUFjLENBQUMsd0NBQXdDLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztZQUN2RyxDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ0osSUFBSSxDQUFDLGVBQWUsQ0FBQyxjQUFjLENBQUMsd0NBQXdDLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztZQUN2RyxDQUFDO1FBQ0wsQ0FBQztRQW5OTSw4QkFBTyxHQUFHLENBQUMsUUFBUSxFQUFFLFVBQVUsRUFBRSxpQkFBaUIsRUFBRSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztRQW9ON0csNkJBQUM7S0FyTkQsQUFxTkMsSUFBQTtJQUVELGNBQUcsQ0FBQyxVQUFVLENBQUMsd0JBQXdCLEVBQUUsc0JBQXNCLENBQUMsQ0FBQyIsImZpbGUiOiJtb2R1bGUvbWFpbnRhaW4vZGV2aWNlU3RhdHVzL2RldmljZS5zdGF0dXMuY29udHJvbGxlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGRlbGwgb24gMjAxNy80LzI0LlxyXG4gKi9cclxuaW1wb3J0IHsgYXBwIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcHAvbWFpbi5hcHBcIjtcclxuXHJcbmltcG9ydCBcImNzcyFtb2R1bGUvbWFpbnRhaW4vY3NzL21haW50YWluLWRldmljZVN0YXR1cy5jc3NcIjtcclxuaW1wb3J0IFwiYW5ndWxhclwiO1xyXG5pbXBvcnQgJ2NzcyFtb2R1bGUvbWFpbnRhaW4vY3NzL21haW50YWluLW9wZXJhdGVMb2cuY3NzJztcclxuaW1wb3J0IFwiLi4vLi4vY29tbW9uL3NlcnZpY2VzL21haW50YWluLnNlcnZpY2VcIlxyXG5pbXBvcnQgXCIuLi8uLi9jb21tb24vc2VydmljZXMvY2FzZWNhZGUuc2VydmljZVwiXHJcbmltcG9ydCBcIi4uL21haW4vbWFpbnRhaW5GYWN0b3J5XCJcclxuaW1wb3J0IHsgSUVjaGFydEZhY3RvcnkgfSBmcm9tIFwiLi4vbWFpbi9tYWludGFpbkZhY3RvcnlcIlxyXG5pbXBvcnQgeyBJVGFibGVIZWFkZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2RpcmVjdGl2ZS91bml0LXRhYmxlL3RhYmxlLXBhcmFtc1wiO1xyXG5pbXBvcnQgeyBJTWFpbnRhaW5TZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXJ2aWNlcy9tYWludGFpbi5zZXJ2aWNlXCJcclxuaW1wb3J0IHsgSUNhc0NhZGVTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXJ2aWNlcy9jYXNlY2FkZS5zZXJ2aWNlXCJcclxuaW1wb3J0IHsgUmVzcG9uc2VSZXN1bHQgfSBmcm9tIFwiLi4vLi4vLi4vY29yZS9wYXJhbXMvcmVzdWx0L1Jlc3BvbnNlUmVzdWx0XCI7XHJcbmltcG9ydCB7IFBhZ2VQYXJhbXNBbmRSZXN1bHQsIElQYWdpbmF0aW9uLCBQYWdpbmF0aW9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9QYWdpbmF0aW9uXCI7XHJcbmltcG9ydCB7IElUcmVlRGF0YVBhcmFtcywgVHJlZURhdGFQYXJhbXMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2RpcmVjdGl2ZS90cmVlL3RyZWUtcGFyYW1zXCI7XHJcbmltcG9ydCB7IEFyZWFFeCB9IGZyb20gXCIuLi8uLi8uLi9jb3JlL2VudGl0eS9leC9BcmVhRXhcIjtcclxuXHJcbmRlY2xhcmUgbGV0ICQ6IGFueTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgZGV2aWNlT2JqZWN0IHtcclxuICAgIHR5cGU6IHN0cmluZztcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHN0YXR1cz86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBkZXZpY2VBcnJheSA9IFtcclxuICAgIHsgdHlwZTogXCJJdnNTZXJ2ZXJcIiwgbmFtZTogXCLmnI3liqHlmahcIiwgc3RhdHVzOiB0cnVlIH0sXHJcbiAgICB7IHR5cGU6IFwiQ2FtZXJhXCIsIG5hbWU6IFwi5pGE5YOP5py6XCIsIHN0YXR1czogZmFsc2UgfSxcclxuICAgIHsgdHlwZTogXCJXaUZpXCIsIG5hbWU6IFwiV2lGaVwiLCBzdGF0dXM6IGZhbHNlIH0sXHJcbiAgICB7IHR5cGU6IFwiUm1wR2F0ZVwiLCBuYW1lOiBcIuWNoeWPo1wiLCBzdGF0dXM6IGZhbHNlIH0sXHJcbiAgICB7IHR5cGU6IFwiRUZFTkNFXCIsIG5hbWU6IFwi55S15a2Q5Zu05qCPXCIsIHN0YXR1czogZmFsc2UgfVxyXG5dIGFzIEFycmF5PGRldmljZU9iamVjdD47XHJcblxyXG5leHBvcnQgY29uc3QgY2hlY2tMaW5lID0gW1xyXG4gICAgeyB0eXBlOiBcIjFcIiwgbmFtZTogXCLlnKjnur9cIiB9LFxyXG4gICAgeyB0eXBlOiBcIjBcIiwgbmFtZTogXCLnprvnur9cIiB9XHJcbl0gYXMgQXJyYXk8ZGV2aWNlT2JqZWN0PjtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYXNDYWRlU2VhcmNoUGFyYW1zIHtcclxuICAgIHNlYXJjaFR5cGU6IHN0cmluZztcclxuICAgIG9yZGVyVHlwZTogc3RyaW5nID0gJ0FTQyc7XHJcbiAgICBuYW1lPzogc3RyaW5nO1xyXG4gICAgdHlwZT86IHN0cmluZztcclxuICAgIHN0YXR1cz86IHN0cmluZztcclxuICAgIHBhZ2VTaXplOiBudW1iZXIgPSAxMDtcclxuICAgIGN1cnJlbnRQYWdlOiBudW1iZXIgPSAxO1xyXG4gICAgaWZFeHBvcnQ/OiBib29sZWFuO1xyXG4gICAgYXJlYUlEPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgZGV2aWNlU3RhdHVzSW5mbyB7XHJcbiAgICBBcmVhSWQ6IHN0cmluZztcclxuICAgIEFyZWFOYW1lOiBzdHJpbmc7XHJcbiAgICBDb2RlOiBzdHJpbmc7XHJcbiAgICBJRD86IHN0cmluZztcclxuICAgIElwQWRkcmVzczogc3RyaW5nO1xyXG4gICAgTmFtZTogc3RyaW5nO1xyXG4gICAgUG9ydE51bWJlcj86IHN0cmluZztcclxuICAgIFN0YXRlOiBzdHJpbmc7XHJcbiAgICBUeXBlPzogc3RyaW5nO1xyXG4gICAgU2VydmVyVHlwZT86IHN0cmluZztcclxuICAgIFNlcnZlcklwPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgcnVuT3BlcmF0ZUxvZ0RhdGEge1xyXG4gICAgUmVzdWx0OiBBcnJheTxkZXZpY2VTdGF0dXNJbmZvPjtcclxuICAgIFRvdGFsQ291bnQ6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIGZpZWxkVGl0bGUge1xyXG4gICAgZmllbGQ6IHN0cmluZztcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBpc1Nob3c6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB0SGVhZExpc3Q6IEFycmF5PGZpZWxkVGl0bGU+ID0gW1xyXG4gICAgeyBmaWVsZDogXCJOYW1lXCIsIHRpdGxlOiBcIkZEU18wMl8wMl8yMFwiLCBpc1Nob3c6IHRydWUgfSxcclxuICAgIHsgZmllbGQ6IFwiQXJlYU5hbWVcIiwgdGl0bGU6IFwiRkRTXzAyXzAyXzIxXCIsIGlzU2hvdzogdHJ1ZSB9LFxyXG4gICAgeyBmaWVsZDogXCJUeXBlXCIsIHRpdGxlOiBcIkZEU18wMl8wMl8yMlwiLCBpc1Nob3c6IHRydWUgfSxcclxuICAgIHsgZmllbGQ6IFwiQ2FtZXJhVHlwZVwiLCB0aXRsZTogXCJGRFNfMDJfMDJfMjdcIiwgaXNTaG93OiB0cnVlIH0sXHJcbiAgICB7IGZpZWxkOiBcIkFsYXJtTnVtXCIsIHRpdGxlOiBcIkZEU18wMl8wMl8yOFwiLCBpc1Nob3c6IHRydWUgfSxcclxuICAgIHsgZmllbGQ6IFwiSXBBZGRyZXNzXCIsIHRpdGxlOiBcIkZEU18wMl8wMl8yM1wiLCBpc1Nob3c6IHRydWUgfSxcclxuICAgIHsgZmllbGQ6IFwiU3RhdHVzXCIsIHRpdGxlOiBcIkZEU18wMl8wMl8yNFwiLCBpc1Nob3c6IHRydWUgfVxyXG5dO1xyXG5cclxuY2xhc3MgRGV2aWNlU3RhdHVzQ29udHJvbGxlciB7XHJcbiAgICBzdGF0aWMgJGluamVjdCA9IFsnJHNjb3BlJywgJyR0aW1lb3V0JywgJ21haW50YWluU2VydmljZScsICdsYXllcicsICdjYXNDYWRlU2VydmljZScsICdtYWludGFpbkZhY3RvcnknXTtcclxuICAgIHNob3dDYW1lcmE6IEZ1bmN0aW9uO1xyXG4gICAgaHRtbFVybDogc3RyaW5nO1xyXG4gICAgZGV2aWNlQXJyYXk6IEFycmF5PGRldmljZU9iamVjdD4gPSBkZXZpY2VBcnJheTtcclxuICAgIC8v5p+l6K+i5p2h5Lu2XHJcbiAgICBoYW5kbGVTdGFydFRpbWU6IHN0cmluZztcclxuICAgIGhhbmRsZUVuZFRpbWU6IHN0cmluZztcclxuICAgIC8v6L6T5YWl5YWz6ZSu5a2XXHJcbiAgICBrZXlWYWx1ZUlucHV0OiBzdHJpbmc7XHJcbiAgICAvL+afpeivoui/kOihjOaXpeW/l+aVsOaNrlxyXG4gICAgc2VhcmNoUnVuTG9nOiBGdW5jdGlvbjtcclxuICAgIC8v5YiG6aG1XHJcbiAgICBjdXJyZW50UGFnZURhdGE6IEFycmF5PGRldmljZVN0YXR1c0luZm8+O1xyXG4gICAgcGFnZVBhcmFtczogUGFnZVBhcmFtc0FuZFJlc3VsdCA9IG5ldyBQYWdlUGFyYW1zQW5kUmVzdWx0KCk7XHJcbiAgICBQYWdpbmF0aW9uOiBJUGFnaW5hdGlvbiA9IG5ldyBQYWdpbmF0aW9uKCk7XHJcbiAgICBwYWdlVHlwZTogc3RyaW5nID0gJ0l2c1NlcnZlcic7XHJcbiAgICAvLyB0YWJsZSDliJfooajmlbDmja5cclxuICAgIHRIZWFkTGlzdDogQXJyYXk8ZmllbGRUaXRsZT4gPSB0aGlzLnN3aXRjaFRhYmxlVGl0bGUodGhpcy5wYWdlVHlwZSk7XHJcbiAgICB0YWJsZU5vRGF0YTogYm9vbGVhbjtcclxuICAgIC8v5qCRXHJcbiAgICBhcmVhVHJlZURhdGFQYXJhbXM6IElUcmVlRGF0YVBhcmFtczxBcmVhRXg+O1xyXG4gICAgYXJlYUlkOiBzdHJpbmc7XHJcbiAgICBhcmVhTmFtZTogc3RyaW5nID0gXCLlhajpg6hcIjtcclxuICAgIGlzU2hvd0FyZWFUcmVlOiBib29sZWFuO1xyXG4gICAgLy/ov4fmu6RcclxuICAgIG9wZXJhdG9yTW9kdWxlczogQXJyYXk8ZGV2aWNlT2JqZWN0PiA9IGRldmljZUFycmF5O1xyXG4gICAgb3BlcmF0b3JNb2R1bGU6IHN0cmluZztcclxuICAgIG9wZXJhdG9yU3RhdHVzOiBzdHJpbmc7XHJcbiAgICBjaGVja0xpbmU6IEFycmF5PGRldmljZU9iamVjdD4gPSBjaGVja0xpbmU7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlICRzY29wZTogYW55LFxyXG4gICAgICAgIHByaXZhdGUgJHRpbWVvdXQ6IGFueSxcclxuICAgICAgICBwcml2YXRlIG1haW50YWluU2VydmljZTogSU1haW50YWluU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGxheWVyOiBhbnksXHJcbiAgICAgICAgcHJpdmF0ZSBjYXNDYWRlU2VydmljZTogSUNhc0NhZGVTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgbWFpbnRhaW5GYWN0b3J5OiBJRWNoYXJ0RmFjdG9yeVxyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy5nZXRUYWJsZUxpc3QobnVsbCwgJ0l2c1NlcnZlcicpO1xyXG4gICAgICAgIHRoaXMuaW5pdFRyZWUoKTtcclxuICAgICAgICB0aGlzLmdldFRyZWVMaXN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/ojrflj5bljLrln5/moJHkv6Hmga9cclxuICAgIHByaXZhdGUgaW5pdFRyZWUoKSB7XHJcbiAgICAgICAgbGV0IHRoYXQ6IGFueSA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hcmVhVHJlZURhdGFQYXJhbXMgPSBuZXcgVHJlZURhdGFQYXJhbXM8QXJlYUV4PigpO1xyXG4gICAgICAgIHRoaXMuYXJlYVRyZWVEYXRhUGFyYW1zLnRyZWVJZCA9ICdhcmVhVHJlZVVzZXInO1xyXG4gICAgICAgIHRoaXMuYXJlYVRyZWVEYXRhUGFyYW1zLmlzRGVmYXVsdFNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmFyZWFUcmVlRGF0YVBhcmFtcy5vbkNsaWNrID0gKGV2ZW50OiBNb3VzZUV2ZW50LCB0cmVlSWQ6IHN0cmluZywgdHJlZU5vZGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFyZWFJZCA9IHRyZWVOb2RlLklEO1xyXG4gICAgICAgICAgICB0aGlzLmFyZWFOYW1lID0gdHJlZU5vZGUuTmFtZTtcclxuICAgICAgICAgICAgdGhpcy5pc1Nob3dBcmVhVHJlZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLiR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyDojrflj5bljLrln5/moJHmlbDmja5cclxuICAgIHB1YmxpYyBnZXRUcmVlTGlzdCgpIHtcclxuICAgICAgICBsZXQgdGhhdDogYW55ID0gdGhpcztcclxuICAgICAgICB0aGF0LmNhc0NhZGVTZXJ2aWNlLmZpbmRBcmVhTGlzdCgpLnRoZW4oY29tcGxldGUpO1xyXG4gICAgICAgIGZ1bmN0aW9uIGNvbXBsZXRlKHJlc3VsdDogYW55KSB7XHJcbiAgICAgICAgICAgIHRoYXQuJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhhdC5hcmVhVHJlZURhdGFQYXJhbXMudHJlZURhdGFzID0gcmVzdWx0LmRhdGE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGdldFRhYmxlVGl0bGUoYXJyVGl0bGU6IEFycmF5PHN0cmluZz4pIHtcclxuICAgICAgICBsZXQgbmV3QXJyVGl0bGU6IEFycmF5PGZpZWxkVGl0bGU+ID0gW107XHJcbiAgICAgICAgdEhlYWRMaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgYXJyVGl0bGUuZm9yRWFjaCgoaXRlbVRpdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT0gaXRlbVRpdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0FyclRpdGxlLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5ld0FyclRpdGxlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyDkuI3lkIznmoTooajojrflj5bkuI3lkIznmoTooajlpLRcclxuICAgIHB1YmxpYyBzd2l0Y2hUYWJsZVRpdGxlKGRldmljZU5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIHN3aXRjaCAoZGV2aWNlTmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiSXZzU2VydmVyXCI6IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRhYmxlVGl0bGUoWydOYW1lJywgJ0FyZWFOYW1lJywgJ1R5cGUnLCAnSXBBZGRyZXNzJywgJ1N0YXR1cyddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiQ2FtZXJhXCI6IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRhYmxlVGl0bGUoWydOYW1lJywgJ0FyZWFOYW1lJywgJ0NhbWVyYVR5cGUnLCAnQWxhcm1OdW0nLCAnSXBBZGRyZXNzJywgJ1N0YXR1cyddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUYWJsZVRpdGxlKFsnTmFtZScsICdBcmVhTmFtZScsICdBbGFybU51bScsICdJcEFkZHJlc3MnLCAnU3RhdHVzJ10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzd2l0Y2hEZXZpY2VQYWdlKGRldmljZU5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChkZXZpY2VOYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFnZVR5cGUgPSBkZXZpY2VOYW1lO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50SGVhZExpc3QgPSB0aGlzLnN3aXRjaFRhYmxlVGl0bGUoZGV2aWNlTmFtZSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGV2aWNlQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRldmljZUFycmF5W2ldLnR5cGUgPT0gZGV2aWNlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlQXJyYXlbaV0uc3RhdHVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmh0bWxVcmwgPSB0aGlzLmRldmljZUFycmF5W2ldLnBhdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUYWJsZUxpc3QobnVsbCwgZGV2aWNlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGV2aWNlQXJyYXlbaV0uc3RhdHVzID0gZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL+iOt+WPluWQjuWPsOaVsOaNrlxyXG4gICAgcHJpdmF0ZSBnZXRUYWJsZUxpc3QoUGFyYW1zPzogQ2FzQ2FkZVNlYXJjaFBhcmFtcywgZGV2aWNlTmFtZT86IHN0cmluZykge1xyXG4gICAgICAgIGxldCB0aGF0OiBhbnkgPSB0aGlzO1xyXG4gICAgICAgIGxldCBjYXNDYWRlU2VhcmNoUGFyYW1zOiBDYXNDYWRlU2VhcmNoUGFyYW1zID0gbmV3IENhc0NhZGVTZWFyY2hQYXJhbXMoKTtcclxuICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zLnNlYXJjaFR5cGUgPSBkZXZpY2VOYW1lO1xyXG4gICAgICAgIC8vIOiOt+WPluS5i+WJjea4heepuuaVsOaNrlxyXG4gICAgICAgIHRoYXQucGFnZVBhcmFtcyA9IG5ldyBQYWdlUGFyYW1zQW5kUmVzdWx0KCk7XHJcbiAgICAgICAgdGhhdC5wYWdlUGFyYW1zLmRhdGEgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKFBhcmFtcykge1xyXG4gICAgICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zID0gUGFyYW1zXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhjYXNDYWRlU2VhcmNoUGFyYW1zKTtcclxuXHJcbiAgICAgICAgaWYgKGNhc0NhZGVTZWFyY2hQYXJhbXMuc2VhcmNoVHlwZSA9PT0gXCJJdnNTZXJ2ZXJcIikge1xyXG4gICAgICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zLnNlYXJjaFR5cGUgPSBcIlwiO1xyXG4gICAgICAgICAgICB0aGlzLm1haW50YWluU2VydmljZS5nZXRTZXJ2ZXJTdGF0dXNNb2R1bGUoY2FzQ2FkZVNlYXJjaFBhcmFtcykudGhlbihjb21wbGV0ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tYWludGFpblNlcnZpY2UuZ2V0RGV2aWNlc1N0YXR1c01vZHVsZShjYXNDYWRlU2VhcmNoUGFyYW1zKS50aGVuKGNvbXBsZXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbXBsZXRlKHJlczogUmVzcG9uc2VSZXN1bHQ8cnVuT3BlcmF0ZUxvZ0RhdGE+KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEgJiYgcmVzLmRhdGEuUmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgUmVzdWx0RGF0YTogcnVuT3BlcmF0ZUxvZ0RhdGEgPSByZXMuZGF0YTtcclxuICAgICAgICAgICAgICAgIC8vIHRoYXQuY3VycmVudFBhZ2VEYXRhID0gUmVzdWx0RGF0YS5SZXN1bHQgYXMgQXJyYXk8ZGV2aWNlU3RhdHVzSW5mbz47XHJcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShSZXN1bHREYXRhLlJlc3VsdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0LnBhZ2VQYXJhbXMgPSB0aGF0LlBhZ2luYXRpb24uZ2V0QnlQYWdlKHRoYXQucGFnZVBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5wYWdlUGFyYW1zLnRvdGFsQ291bnQgPSBSZXN1bHREYXRhLlRvdGFsQ291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5wYWdlUGFyYW1zLmN1cnJlbnRQYWdlID0gUGFyYW1zID8gUGFyYW1zLmN1cnJlbnRQYWdlIDogMTtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnBhZ2VQYXJhbXMucGFnZVNpemUgPSAxMDtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnBhZ2VQYXJhbXMucGFnZUNvdW50ID0gTWF0aC5jZWlsKHRoYXQucGFnZVBhcmFtcy50b3RhbENvdW50IC8gdGhhdC5wYWdlUGFyYW1zLnBhZ2VTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LnBhZ2VQYXJhbXMuZGF0YSA9IFJlc3VsdERhdGEuUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoYXQucGFnZVBhcmFtcylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoYXQucGFnZVBhcmFtcy5kYXRhID0gW107XHJcbiAgICAgICAgICAgICAgICB0aGF0LmxheWVyLm1zZyhg5rKh5pyJ5pWw5o2uYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5pS55Y+Y5b2T5YmN6aG1XHJcbiAgICBwdWJsaWMgY2hhbmdlUGFnZShudW06IG51bWJlcikge1xyXG4gICAgICAgIGxldCBjYXNDYWRlU2VhcmNoUGFyYW1zOiBDYXNDYWRlU2VhcmNoUGFyYW1zID0gbmV3IENhc0NhZGVTZWFyY2hQYXJhbXMoKTtcclxuICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zLmN1cnJlbnRQYWdlID0gbnVtO1xyXG4gICAgICAgIGNhc0NhZGVTZWFyY2hQYXJhbXMuc2VhcmNoVHlwZSA9IHRoaXMucGFnZVR5cGU7XHJcbiAgICAgICAgY2FzQ2FkZVNlYXJjaFBhcmFtcy5uYW1lID0gdGhpcy5rZXlWYWx1ZUlucHV0O1xyXG4gICAgICAgIGNhc0NhZGVTZWFyY2hQYXJhbXMudHlwZSA9IHRoaXMub3BlcmF0b3JNb2R1bGU7XHJcbiAgICAgICAgY2FzQ2FkZVNlYXJjaFBhcmFtcy5zdGF0dXMgPSB0aGlzLm9wZXJhdG9yU3RhdHVzO1xyXG4gICAgICAgIHRoaXMuZ2V0VGFibGVMaXN0KGNhc0NhZGVTZWFyY2hQYXJhbXMsIHRoaXMucGFnZVR5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOafpeivouaMiemSrlxyXG4gICAgcHVibGljIG9wZXJhdG9yU2VhcmNoKCkge1xyXG4gICAgICAgIGxldCBjYXNDYWRlU2VhcmNoUGFyYW1zOiBDYXNDYWRlU2VhcmNoUGFyYW1zID0gbmV3IENhc0NhZGVTZWFyY2hQYXJhbXMoKTtcclxuICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zLmN1cnJlbnRQYWdlID0gMTtcclxuICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zLnNlYXJjaFR5cGUgPSB0aGlzLnBhZ2VUeXBlO1xyXG4gICAgICAgIGNhc0NhZGVTZWFyY2hQYXJhbXMubmFtZSA9IHRoaXMua2V5VmFsdWVJbnB1dDtcclxuICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zLnR5cGUgPSB0aGlzLm9wZXJhdG9yTW9kdWxlO1xyXG4gICAgICAgIGNhc0NhZGVTZWFyY2hQYXJhbXMuc3RhdHVzID0gdGhpcy5vcGVyYXRvclN0YXR1cztcclxuICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zLmFyZWFJRCA9IHRoaXMuYXJlYUlkO1xyXG5cclxuICAgICAgICB0aGlzLmdldFRhYmxlTGlzdChjYXNDYWRlU2VhcmNoUGFyYW1zLCB0aGlzLnBhZ2VUeXBlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlr7zlh7rmjInpkq5cclxuICAgIHB1YmxpYyBvcGVyYXRvckV4cG9ydCgpIHtcclxuICAgICAgICBsZXQgY2FzQ2FkZVNlYXJjaFBhcmFtczogQ2FzQ2FkZVNlYXJjaFBhcmFtcyA9IG5ldyBDYXNDYWRlU2VhcmNoUGFyYW1zKCk7XHJcbiAgICAgICAgY2FzQ2FkZVNlYXJjaFBhcmFtcy5jdXJyZW50UGFnZSA9IDE7XHJcbiAgICAgICAgY2FzQ2FkZVNlYXJjaFBhcmFtcy5zZWFyY2hUeXBlID0gdGhpcy5wYWdlVHlwZTtcclxuICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zLm5hbWUgPSB0aGlzLmtleVZhbHVlSW5wdXQ7XHJcbiAgICAgICAgY2FzQ2FkZVNlYXJjaFBhcmFtcy50eXBlID0gdGhpcy5vcGVyYXRvck1vZHVsZTtcclxuICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zLnN0YXR1cyA9IHRoaXMub3BlcmF0b3JTdGF0dXM7XHJcbiAgICAgICAgY2FzQ2FkZVNlYXJjaFBhcmFtcy5hcmVhSUQgPSB0aGlzLmFyZWFJZDtcclxuICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zLmlmRXhwb3J0ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRUYWJsZUxpc3RFeHBvcnQoY2FzQ2FkZVNlYXJjaFBhcmFtcywgdGhpcy5wYWdlVHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRhYmxlTGlzdEV4cG9ydChQYXJhbXM/OiBDYXNDYWRlU2VhcmNoUGFyYW1zLCBkZXZpY2VOYW1lPzogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHRoYXQ6IERldmljZVN0YXR1c0NvbnRyb2xsZXIgPSB0aGlzO1xyXG4gICAgICAgIGxldCBjYXNDYWRlU2VhcmNoUGFyYW1zOiBDYXNDYWRlU2VhcmNoUGFyYW1zID0gbmV3IENhc0NhZGVTZWFyY2hQYXJhbXMoKTtcclxuICAgICAgICBjYXNDYWRlU2VhcmNoUGFyYW1zLnNlYXJjaFR5cGUgPSBkZXZpY2VOYW1lO1xyXG5cclxuICAgICAgICBpZiAoUGFyYW1zKSB7XHJcbiAgICAgICAgICAgIGNhc0NhZGVTZWFyY2hQYXJhbXMgPSBQYXJhbXNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjYXNDYWRlU2VhcmNoUGFyYW1zLnNlYXJjaFR5cGUgPT09IFwiSXZzU2VydmVyXCIpIHtcclxuICAgICAgICAgICAgZGVsZXRlIGNhc0NhZGVTZWFyY2hQYXJhbXMuc2VhcmNoVHlwZTtcclxuICAgICAgICAgICAgdGhhdC5tYWludGFpbkZhY3RvcnkuZXhwb3J0VGFibGVYbHMoXCIvcGRwL25ldE1hbmFnZXJDdHJsL3NlcnZlclN0YXRlL2V4cG9ydFwiLCBjYXNDYWRlU2VhcmNoUGFyYW1zKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGF0Lm1haW50YWluRmFjdG9yeS5leHBvcnRUYWJsZVhscyhcIi9wZHAvbmV0TWFuYWdlckN0cmwvZGV2aWNlU3RhdGUvZXhwb3J0XCIsIGNhc0NhZGVTZWFyY2hQYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuYXBwLmNvbnRyb2xsZXIoXCJkZXZpY2VTdGF0dXNDb250cm9sbGVyXCIsIERldmljZVN0YXR1c0NvbnRyb2xsZXIpO1xyXG5cclxuIl19
