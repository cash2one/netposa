define(["require", "exports", "../../../common/app/main.app", "../../../common/directive/tree/tree-params", "../../../common/services/total.service", "../../totalFactory/doEcharts", "../../../common/services/area.service", "angular", "echarts"], function (require, exports, main_app_1, tree_params_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var echarts = require("echarts");
    var SearchParams = (function () {
        function SearchParams() {
        }
        return SearchParams;
    }());
    var UnitUserController = (function () {
        function UnitUserController($scope, totalService, echartService, areaService, $timeout) {
            var vm = this;
            vm.formatDataList = formatDataList;
            vm.changeTimeBtn = changeTimeBtn;
            vm.showCustomTime = showCustomTime;
            vm.areaCode = '';
            vm.duration = 'THIRY_DAYS';
            vm.startTime = '';
            vm.endTime = '';
            vm.isNoData = true;
            function _getSearchParams() {
                var result = new SearchParams();
                result.areaCode = vm.areaCode;
                result.duration = vm.duration;
                result.startTime = vm.startTime;
                result.endTime = vm.endTime;
                result.groupType = "GROUP_BY_UNIT";
                console.log('传参', result);
                return [result];
            }
            function getDataList() {
                totalService.getUserDataList(_getSearchParams()).then(complete);
                function complete(rep) {
                    console.log('单位用户请求成功', rep);
                    if (rep.code === 200 && rep.data) {
                        vm.isNoData = false;
                        formatDataList(rep.data);
                    }
                    else {
                        vm.isNoData = true;
                    }
                }
            }
            getDataList();
            vm.areaTreeDataParams = new tree_params_1.TreeDataParams();
            vm.areaTreeDataParams.treeId = 'areaTreeUnitUser';
            vm.areaTreeDataParams.isDefaultSelected = true;
            vm.areaTreeDataParams.onClick = treeSelectNode;
            function getTreeList() {
                areaService.findListTree().then(complete);
                function complete(result) {
                    $timeout(function () {
                        vm.areaTreeDataParams.treeDatas = result;
                    });
                }
            }
            getTreeList();
            function treeSelectNode(event, treeId, treeNode) {
                vm.areaCode = treeNode.Code;
                vm.areaName = treeNode.Name;
                vm.isShowAreaTree = false;
                vm.duration = 'THIRY_DAYS';
                getDataList();
                $timeout(function () {
                    $scope.$apply();
                });
            }
            function changeTimeBtn(duration) {
                vm.duration = duration;
                console.log('按钮', vm.duration);
                getDataList();
            }
            function showCustomTime() {
                console.log('自定义时间开始', vm.startTime);
                console.log('自定义时间结束', vm.endTime);
                vm.duration = "CUSTOMIZE";
                getDataList();
            }
            function formatDataList(originalData) {
                var unit_name = [];
                var allUserNum = [];
                var onlineUserNum = [];
                originalData.GROUP_BY_UNIT.forEach(function (item, index) {
                    unit_name.push(item.unitName);
                    allUserNum.push(item.allUserNum);
                    onlineUserNum.push(item.onlineUserNum);
                });
                var formatData = {
                    seriesNameOne: '全部',
                    seriesNameTwo: '在线',
                    gridLeft: '5%',
                    gridRight: '5%',
                    xAxisName: '单位',
                    yAxisName: '用户数',
                    colorTwo: ['#7dc4fb'],
                    colorOne: ['#269dfa'],
                    xAxisData: unit_name,
                    allNum: allUserNum,
                    onlineNum: onlineUserNum
                };
                echartService.drawEchart(echartService.echartPileBarOption(formatData), 'user-2');
            }
        }
        UnitUserController.$inject = ['$scope', 'totalService', 'echartService', 'areaService', '$timeout'];
        return UnitUserController;
    }());
    main_app_1.app.controller('unitUserController', UnitUserController);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUvdG90YWwvdXNlci91bml0VXNlci91bml0VXNlci5jb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztJQXVCQSxJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7SUFFakM7UUFBQTtRQU1BLENBQUM7UUFBRCxtQkFBQztJQUFELENBTkEsQUFNQyxJQUFBO0lBRUQ7UUFnQ0ksNEJBQVksTUFBVyxFQUFFLFlBQTJCLEVBQUUsYUFBNEIsRUFBQyxXQUF3QixFQUFFLFFBQVk7WUFDckgsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDO1lBRWQsRUFBRSxDQUFDLGNBQWMsR0FBRyxjQUFjLENBQUM7WUFDbkMsRUFBRSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7WUFDakMsRUFBRSxDQUFDLGNBQWMsR0FBRyxjQUFjLENBQUM7WUFHbkMsRUFBRSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7WUFDakIsRUFBRSxDQUFDLFFBQVEsR0FBRyxZQUFZLENBQUM7WUFDM0IsRUFBRSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7WUFDbEIsRUFBRSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7WUFDaEIsRUFBRSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7WUFHbkI7Z0JBQ0ksSUFBSSxNQUFNLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztnQkFFaEMsTUFBTSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDO2dCQUM5QixNQUFNLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUM7Z0JBQzlCLE1BQU0sQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQztnQkFDaEMsTUFBTSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDO2dCQUM1QixNQUFNLENBQUMsU0FBUyxHQUFHLGVBQWUsQ0FBQztnQkFDbkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUMsTUFB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QUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFDakMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7Z0JBQzNDLENBQUMsQ0FBQyxDQUFDO2dCQUVILElBQUksVUFBVSxHQUFTO29CQUNuQixhQUFhLEVBQUMsSUFBSTtvQkFDbEIsYUFBYSxFQUFDLElBQUk7b0JBQ2xCLFFBQVEsRUFBRSxJQUFJO29CQUNkLFNBQVMsRUFBRSxJQUFJO29CQUNmLFNBQVMsRUFBRSxJQUFJO29CQUNmLFNBQVMsRUFBRSxLQUFLO29CQUNoQixRQUFRLEVBQUUsQ0FBQyxTQUFTLENBQUM7b0JBQ3JCLFFBQVEsRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFFckIsU0FBUyxFQUFDLFNBQVM7b0JBRW5CLE1BQU0sRUFBQyxVQUFVO29CQUNqQixTQUFTLEVBQUMsYUFBYTtpQkFDMUIsQ0FBQztnQkFFRixhQUFhLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsRUFBQyxRQUFRLENBQUMsQ0FBQztZQUNyRixDQUFDO1FBQ0wsQ0FBQztRQXhKTSwwQkFBTyxHQUFHLENBQUMsUUFBUSxFQUFFLGNBQWMsRUFBQyxlQUFlLEVBQUMsYUFBYSxFQUFDLFVBQVUsQ0FBQyxDQUFDO1FBeUp6Rix5QkFBQztLQTFKRCxBQTBKQyxJQUFBO0lBRUQsY0FBRyxDQUFDLFVBQVUsQ0FBQyxvQkFBb0IsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDIiwiZmlsZSI6Im1vZHVsZS90b3RhbC91c2VyL3VuaXRVc2VyL3VuaXRVc2VyLmNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSB0aiBvbiAyMDE3LzQvMjEuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHthcHB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBwL21haW4uYXBwXCI7XHJcblxyXG5pbXBvcnQge0lUb3RhbFNlcnZpY2V9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc2VydmljZXMvdG90YWwuc2VydmljZVwiXHJcbmltcG9ydCBcIi4uLy4uLy4uL2NvbW1vbi9zZXJ2aWNlcy90b3RhbC5zZXJ2aWNlXCJcclxuXHJcbmltcG9ydCB7SUVjaGFydFNlcnZpY2V9IGZyb20gXCIuLi8uLi90b3RhbEZhY3RvcnkvZG9FY2hhcnRzXCJcclxuaW1wb3J0IFwiLi4vLi4vdG90YWxGYWN0b3J5L2RvRWNoYXJ0c1wiXHJcblxyXG5pbXBvcnQge1Jlc3BvbnNlUmVzdWx0fSBmcm9tIFwiLi4vLi4vLi4vLi4vY29yZS9wYXJhbXMvcmVzdWx0L1Jlc3BvbnNlUmVzdWx0XCJcclxuaW1wb3J0IHtVc2VyUmVzcG9uc2UsVXNlckdyb3VwQnlVbml0fSBmcm9tIFwiLi4vLi4vdG90YWxGYWN0b3J5L3RvdGFsUmVzcG9uc2VcIlxyXG5cclxuaW1wb3J0IHtJVHJlZURhdGFQYXJhbXMsIFRyZWVEYXRhUGFyYW1zfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2RpcmVjdGl2ZS90cmVlL3RyZWUtcGFyYW1zXCI7XHJcbmltcG9ydCB7QXJlYUV4fSBmcm9tIFwiLi4vLi4vLi4vLi4vY29yZS9lbnRpdHkvZXgvQXJlYUV4XCI7XHJcbmltcG9ydCB7SUFyZWFTZXJ2aWNlfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3NlcnZpY2VzL2FyZWEuc2VydmljZVwiO1xyXG5pbXBvcnQgJy4uLy4uLy4uL2NvbW1vbi9zZXJ2aWNlcy9hcmVhLnNlcnZpY2UnO1xyXG5cclxuaW1wb3J0IFwiYW5ndWxhclwiO1xyXG5pbXBvcnQgXCJlY2hhcnRzXCI7XHJcbmRlY2xhcmUgbGV0IHJlcXVpcmU6IGFueTtcclxubGV0IGVjaGFydHMgPSByZXF1aXJlKFwiZWNoYXJ0c1wiKTtcclxuXHJcbmNsYXNzIFNlYXJjaFBhcmFtcyB7XHJcbiAgICBhcmVhQ29kZTogc3RyaW5nO1xyXG4gICAgZHVyYXRpb246IHN0cmluZztcclxuICAgIHN0YXJ0VGltZTpzdHJpbmc7XHJcbiAgICBlbmRUaW1lOnN0cmluZztcclxuICAgIGdyb3VwVHlwZTpzdHJpbmc7XHJcbn1cclxuXHJcbmNsYXNzIFVuaXRVc2VyQ29udHJvbGxlcntcclxuICAgIHN0YXRpYyAkaW5qZWN0ID0gWyckc2NvcGUnLCAndG90YWxTZXJ2aWNlJywnZWNoYXJ0U2VydmljZScsJ2FyZWFTZXJ2aWNlJywnJHRpbWVvdXQnXTtcclxuXHJcbiAgICAvL+agvOW8j+WMluaVsOaNrlxyXG4gICAgZm9ybWF0RGF0YUxpc3Q6RnVuY3Rpb247XHJcblxyXG4gICAgLy/liIfmjaLkuI3lkIzml7bpl7TmjInpkq5cclxuICAgIGNoYW5nZVRpbWVCdG46RnVuY3Rpb247XHJcblxyXG4gICAgLy/lsZXnpLroh6rlrprkuYnml7bpl7TmrrXmlbDmja5cclxuICAgIHNob3dDdXN0b21UaW1lOkZ1bmN0aW9uO1xyXG5cclxuICAgIC8v5Yy65Z+f5qCRXHJcbiAgICBhcmVhVHJlZURhdGFQYXJhbXM6SVRyZWVEYXRhUGFyYW1zPEFyZWFFeD47XHJcbiAgICAvL+WxleekuuWMuuWfn+agkVxyXG4gICAgaXNTaG93QXJlYVRyZWU6Ym9vbGVhbjtcclxuXHJcbiAgICAvL+W8gOWni+aXtumXtFxyXG4gICAgc3RhcnRUaW1lOnN0cmluZztcclxuICAgIC8v57uT5p2f5pe26Ze0XHJcbiAgICBlbmRUaW1lOnN0cmluZztcclxuICAgIC8v5Yy65Z+f5ZCNXHJcbiAgICBhcmVhTmFtZTpzdHJpbmc7XHJcbiAgICAvL+WMuuWfn2NvZGVcclxuICAgIGFyZWFDb2RlOnN0cmluZztcclxuICAgIC8v5pe26Ze05q61XHJcbiAgICBkdXJhdGlvbjpzdHJpbmc7XHJcblxyXG4gICAgLy/ml6DmlbDmja7ml7blsZXnpLpcclxuICAgIGlzTm9EYXRhOmJvb2xlYW47XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKCRzY29wZTogYW55LCB0b3RhbFNlcnZpY2U6IElUb3RhbFNlcnZpY2UsIGVjaGFydFNlcnZpY2U6SUVjaGFydFNlcnZpY2UsYXJlYVNlcnZpY2U6SUFyZWFTZXJ2aWNlLCAkdGltZW91dDphbnkpIHtcclxuICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2bS5mb3JtYXREYXRhTGlzdCA9IGZvcm1hdERhdGFMaXN0O1xyXG4gICAgICAgIHZtLmNoYW5nZVRpbWVCdG4gPSBjaGFuZ2VUaW1lQnRuO1xyXG4gICAgICAgIHZtLnNob3dDdXN0b21UaW1lID0gc2hvd0N1c3RvbVRpbWU7XHJcblxyXG4gICAgICAgIC8v6buY6K6k5YC8XHJcbiAgICAgICAgdm0uYXJlYUNvZGUgPSAnJztcclxuICAgICAgICB2bS5kdXJhdGlvbiA9ICdUSElSWV9EQVlTJztcclxuICAgICAgICB2bS5zdGFydFRpbWUgPSAnJztcclxuICAgICAgICB2bS5lbmRUaW1lID0gJyc7XHJcbiAgICAgICAgdm0uaXNOb0RhdGEgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyDlkJHlkI7lj7DkvKDnmoTlj4LmlbBcclxuICAgICAgICBmdW5jdGlvbiBfZ2V0U2VhcmNoUGFyYW1zKCk6QXJyYXk8U2VhcmNoUGFyYW1zPntcclxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG5ldyBTZWFyY2hQYXJhbXMoKTtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdC5hcmVhQ29kZSA9IHZtLmFyZWFDb2RlO1xyXG4gICAgICAgICAgICByZXN1bHQuZHVyYXRpb24gPSB2bS5kdXJhdGlvbjtcclxuICAgICAgICAgICAgcmVzdWx0LnN0YXJ0VGltZSA9IHZtLnN0YXJ0VGltZTtcclxuICAgICAgICAgICAgcmVzdWx0LmVuZFRpbWUgPSB2bS5lbmRUaW1lO1xyXG4gICAgICAgICAgICByZXN1bHQuZ3JvdXBUeXBlID0gXCJHUk9VUF9CWV9VTklUXCI7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfkvKDlj4InLHJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBbcmVzdWx0XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v6I635Y+W5pWw5o2u5YiX6KGoXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RGF0YUxpc3QoKXtcclxuICAgICAgICAgICAgdG90YWxTZXJ2aWNlLmdldFVzZXJEYXRhTGlzdChfZ2V0U2VhcmNoUGFyYW1zKCkpLnRoZW4oY29tcGxldGUpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBjb21wbGV0ZShyZXA6UmVzcG9uc2VSZXN1bHQ8VXNlclJlc3BvbnNlPil7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Y2V5L2N55So5oi36K+35rGC5oiQ5YqfJyxyZXApO1xyXG4gICAgICAgICAgICAgICAgaWYocmVwLmNvZGUgPT09IDIwMCAmJiByZXAuZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uaXNOb0RhdGEgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXREYXRhTGlzdChyZXAuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB2bS5pc05vRGF0YSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldERhdGFMaXN0KCk7XHJcblxyXG4gICAgICAgIC8vIOWIneWni+WMluWMuuWfn+agkVxyXG4gICAgICAgIHZtLmFyZWFUcmVlRGF0YVBhcmFtcyA9IG5ldyBUcmVlRGF0YVBhcmFtczxBcmVhRXg+KCk7XHJcbiAgICAgICAgdm0uYXJlYVRyZWVEYXRhUGFyYW1zLnRyZWVJZCA9ICdhcmVhVHJlZVVuaXRVc2VyJztcclxuICAgICAgICB2bS5hcmVhVHJlZURhdGFQYXJhbXMuaXNEZWZhdWx0U2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHZtLmFyZWFUcmVlRGF0YVBhcmFtcy5vbkNsaWNrID0gdHJlZVNlbGVjdE5vZGU7XHJcblxyXG4gICAgICAgIC8vIOiOt+WPluWMuuWfn+agkeaVsOaNrlxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFRyZWVMaXN0KCl7XHJcbiAgICAgICAgICAgIGFyZWFTZXJ2aWNlLmZpbmRMaXN0VHJlZSgpLnRoZW4oY29tcGxldGUpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBjb21wbGV0ZShyZXN1bHQ6IEFycmF5PEFyZWFFeD4pIHtcclxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5hcmVhVHJlZURhdGFQYXJhbXMudHJlZURhdGFzID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldFRyZWVMaXN0KCk7XHJcblxyXG4gICAgICAgIC8vIOeCueWHu+W9k+WJjeiKgueCueaXtuiOt+WPluiKgueCueS/oeaBr1xyXG4gICAgICAgIGZ1bmN0aW9uIHRyZWVTZWxlY3ROb2RlKGV2ZW50OiBNb3VzZUV2ZW50LCB0cmVlSWQ6IHN0cmluZywgdHJlZU5vZGU6IGFueSkge1xyXG4gICAgICAgICAgICAvL+WMuuWfn0NvZGVcclxuICAgICAgICAgICAgdm0uYXJlYUNvZGUgPSB0cmVlTm9kZS5Db2RlO1xyXG4gICAgICAgICAgICAvL+WMuuWfn+WQjVxyXG4gICAgICAgICAgICB2bS5hcmVhTmFtZSA9IHRyZWVOb2RlLk5hbWU7XHJcbiAgICAgICAgICAgIHZtLmlzU2hvd0FyZWFUcmVlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZtLmR1cmF0aW9uID0gJ1RISVJZX0RBWVMnO1xyXG4gICAgICAgICAgICBnZXREYXRhTGlzdCgpO1xyXG4gICAgICAgICAgICAvL+S4uuS6huinpuWPkeiEj+ajgOafpSDmm7TmlrDop4blm75cclxuICAgICAgICAgICAgJHRpbWVvdXQoKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/ngrnlh7vkuI3lkIzml7bpl7TmrrXmjInpkq5cclxuICAgICAgICBmdW5jdGlvbiBjaGFuZ2VUaW1lQnRuKGR1cmF0aW9uOnN0cmluZyl7XHJcbiAgICAgICAgICAgIHZtLmR1cmF0aW9uID0gZHVyYXRpb247XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmjInpkq4nLHZtLmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgZ2V0RGF0YUxpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v6Ieq5a6a5LmJ5pe26Ze0XHJcbiAgICAgICAgZnVuY3Rpb24gc2hvd0N1c3RvbVRpbWUoKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+iHquWumuS5ieaXtumXtOW8gOWniycsdm0uc3RhcnRUaW1lKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+iHquWumuS5ieaXtumXtOe7k+adnycsdm0uZW5kVGltZSk7XHJcbiAgICAgICAgICAgIHZtLmR1cmF0aW9uID0gXCJDVVNUT01JWkVcIjtcclxuICAgICAgICAgICAgZ2V0RGF0YUxpc3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v5ZCE5Y2V5L2N55So5oi357uf6K6h5Zu+6KGo6YWN572u5riy5p+TXHJcbiAgICAgICAgZnVuY3Rpb24gZm9ybWF0RGF0YUxpc3Qob3JpZ2luYWxEYXRhOlVzZXJSZXNwb25zZSkge1xyXG4gICAgICAgICAgICBsZXQgdW5pdF9uYW1lOkFycmF5PGFueT4gPSBbXTtcclxuICAgICAgICAgICAgbGV0IGFsbFVzZXJOdW06QXJyYXk8YW55PiA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgb25saW5lVXNlck51bTpBcnJheTxhbnk+ID0gW107XHJcblxyXG4gICAgICAgICAgICBvcmlnaW5hbERhdGEuR1JPVVBfQllfVU5JVC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtOlVzZXJHcm91cEJ5VW5pdCwgaW5kZXg6bnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICB1bml0X25hbWUucHVzaChpdGVtLnVuaXROYW1lKTtcclxuICAgICAgICAgICAgICAgIGFsbFVzZXJOdW0ucHVzaChpdGVtLmFsbFVzZXJOdW0pO1xyXG4gICAgICAgICAgICAgICAgb25saW5lVXNlck51bS5wdXNoKGl0ZW0ub25saW5lVXNlck51bSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGZvcm1hdERhdGE6b2JqZWN0ID17XHJcbiAgICAgICAgICAgICAgICBzZXJpZXNOYW1lT25lOiflhajpg6gnLFxyXG4gICAgICAgICAgICAgICAgc2VyaWVzTmFtZVR3bzon5Zyo57q/JyxcclxuICAgICAgICAgICAgICAgIGdyaWRMZWZ0OiAnNSUnLFxyXG4gICAgICAgICAgICAgICAgZ3JpZFJpZ2h0OiAnNSUnLFxyXG4gICAgICAgICAgICAgICAgeEF4aXNOYW1lOiAn5Y2V5L2NJyxcclxuICAgICAgICAgICAgICAgIHlBeGlzTmFtZTogJ+eUqOaIt+aVsCcsXHJcbiAgICAgICAgICAgICAgICBjb2xvclR3bzogWycjN2RjNGZiJ10sXHJcbiAgICAgICAgICAgICAgICBjb2xvck9uZTogWycjMjY5ZGZhJ10sXHJcbiAgICAgICAgICAgICAgICAvL3jovbTmlbDmja5cclxuICAgICAgICAgICAgICAgIHhBeGlzRGF0YTp1bml0X25hbWUsXHJcbiAgICAgICAgICAgICAgICAvL+aVsOaNrlxyXG4gICAgICAgICAgICAgICAgYWxsTnVtOmFsbFVzZXJOdW0sXHJcbiAgICAgICAgICAgICAgICBvbmxpbmVOdW06b25saW5lVXNlck51bVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZWNoYXJ0U2VydmljZS5kcmF3RWNoYXJ0KGVjaGFydFNlcnZpY2UuZWNoYXJ0UGlsZUJhck9wdGlvbihmb3JtYXREYXRhKSwndXNlci0yJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5hcHAuY29udHJvbGxlcigndW5pdFVzZXJDb250cm9sbGVyJywgVW5pdFVzZXJDb250cm9sbGVyKTsiXX0=
