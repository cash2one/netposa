define(["require", "exports", "../../../common/app/main.app", "../../../common/directive/tree/tree-params", "../../../common/services/total.service", "../../totalFactory/doEcharts", "../../../common/services/area.service", "angular", "echarts"], function (require, exports, main_app_1, tree_params_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var echarts = require("echarts");
    var SearchParams = (function () {
        function SearchParams() {
        }
        return SearchParams;
    }());
    var TrendSearchController = (function () {
        function TrendSearchController($scope, totalService, echartService, areaService, $timeout) {
            var vm = this;
            vm.formatDataList = formatDataList;
            vm.changeTimeBtn = changeTimeBtn;
            vm.showCustomTime = showCustomTime;
            $timeout(function () {
                vm.areaCode = '';
                vm.duration = 'THIRY_DAYS';
                vm.startTime = '';
                vm.endTime = '';
                vm.isNoData = true;
            });
            function _getSearchParams() {
                var result = new SearchParams();
                result.areaCode = vm.areaCode;
                result.duration = vm.duration;
                result.startTime = vm.startTime;
                result.endTime = vm.endTime;
                result.groupType = "GROUP_BY_DAY";
                console.log('传参', result);
                return [result];
            }
            function getDataList() {
                totalService.getSearchDataList(_getSearchParams()).then(complete);
                function complete(rep) {
                    console.log('检索趋势请求成功', rep);
                    if (rep.code === 200 && rep.data) {
                        vm.isNoData = false;
                        formatDataList(rep.data);
                    }
                    else {
                        vm.isNoData = true;
                    }
                }
            }
            getDataList();
            vm.areaTreeDataParams = new tree_params_1.TreeDataParams();
            vm.areaTreeDataParams.treeId = 'areaTreeTrendSearch';
            vm.areaTreeDataParams.isDefaultSelected = true;
            vm.areaTreeDataParams.onClick = treeSelectNode;
            function getTreeList() {
                areaService.findListTree().then(complete);
                function complete(result) {
                    $timeout(function () {
                        vm.areaTreeDataParams.treeDatas = result;
                    });
                }
            }
            getTreeList();
            function treeSelectNode(event, treeId, treeNode) {
                vm.areaCode = treeNode.Code;
                vm.areaName = treeNode.Name;
                vm.isShowAreaTree = false;
                vm.duration = 'THIRY_DAYS';
                getDataList();
                $timeout(function () {
                    $scope.$apply();
                });
            }
            function changeTimeBtn(duration) {
                vm.duration = duration;
                console.log('按钮', vm.duration);
                getDataList();
            }
            function showCustomTime() {
                console.log('自定义时间开始', vm.startTime);
                console.log('自定义时间结束', vm.endTime);
                vm.duration = "CUSTOMIZE";
                getDataList();
            }
            function formatDataList(originalData) {
                var searchNum = [];
                var area = [];
                originalData.GROUP_BY_DAY.forEach(function (item, index) {
                    area.push(item.strDate);
                    searchNum.push(item.retrievalNum);
                });
                var formatData = {
                    color: ['#6ae4d9'],
                    xAxisData: area,
                    showData: searchNum
                };
                echartService.drawEchart(echartService.echartLineAreaOption(formatData), 'search-3');
            }
        }
        TrendSearchController.$inject = ['$scope', 'totalService', 'echartService', 'areaService', '$timeout'];
        return TrendSearchController;
    }());
    main_app_1.app.controller('trendSearchController', TrendSearchController);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUvdG90YWwvc2VhcmNoL3RyZW5kU2VhcmNoL3RyZW5kU2VhcmNoLmNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0lBdUJBLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUVqQztRQUFBO1FBTUEsQ0FBQztRQUFELG1CQUFDO0lBQUQsQ0FOQSxBQU1DLElBQUE7SUFFRDtRQStCSSwrQkFBWSxNQUFXLEVBQUUsWUFBMkIsRUFBRSxhQUE0QixFQUFDLFdBQXdCLEVBQUUsUUFBWTtZQUNySCxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7WUFFZCxFQUFFLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQztZQUNuQyxFQUFFLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztZQUNqQyxFQUFFLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQztZQUVuQyxRQUFRLENBQUM7Z0JBRUwsRUFBRSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7Z0JBQ2pCLEVBQUUsQ0FBQyxRQUFRLEdBQUcsWUFBWSxDQUFDO2dCQUMzQixFQUFFLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztnQkFDbEIsRUFBRSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7Z0JBQ2hCLEVBQUUsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1lBQ3ZCLENBQUMsQ0FBQyxDQUFDO1lBR0g7Z0JBQ0ksSUFBSSxNQUFNLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztnQkFFaEMsTUFBTSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDO2dCQUM5QixNQUFNLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUM7Z0JBQzlCLE1BQU0sQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDLFNBQVMsQ0FBQztnQkFDaEMsTUFBTSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDO2dCQUM1QixNQUFNLENBQUMsU0FBUyxHQUFHLGNB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QixTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDdEMsQ0FBQyxDQUFDLENBQUM7Z0JBRUgsSUFBSSxVQUFVLEdBQVM7b0JBQ25CLEtBQUssRUFBRSxDQUFDLFNBQVMsQ0FBQztvQkFFbEIsU0FBUyxFQUFDLElBQUk7b0JBRWQsUUFBUSxFQUFDLFNBQVM7aUJBQ3JCLENBQUM7Z0JBQ0YsYUFBYSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsVUFBVSxDQUFDLEVBQUMsVUFBVSxDQUFDLENBQUM7WUFDeEYsQ0FBQztRQUVMLENBQUM7UUEvSU0sNkJBQU8sR0FBRyxDQUFDLFFBQVEsRUFBRSxjQUFjLEVBQUMsZUFBZSxFQUFDLGFBQWEsRUFBQyxVQUFVLENBQUMsQ0FBQztRQWdKekYsNEJBQUM7S0FqSkQsQUFpSkMsSUFBQTtJQUdELGNBQUcsQ0FBQyxVQUFVLENBQUMsdUJBQXVCLEVBQUUscUJBQXFCLENBQUMsQ0FBQyIsImZpbGUiOiJtb2R1bGUvdG90YWwvc2VhcmNoL3RyZW5kU2VhcmNoL3RyZW5kU2VhcmNoLmNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSB0aiBvbiAyMDE3LzQvMjEuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHthcHB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBwL21haW4uYXBwXCI7XHJcblxyXG5pbXBvcnQge0lUb3RhbFNlcnZpY2V9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc2VydmljZXMvdG90YWwuc2VydmljZVwiXHJcbmltcG9ydCBcIi4uLy4uLy4uL2NvbW1vbi9zZXJ2aWNlcy90b3RhbC5zZXJ2aWNlXCJcclxuXHJcbmltcG9ydCB7SUVjaGFydFNlcnZpY2V9IGZyb20gXCIuLi8uLi90b3RhbEZhY3RvcnkvZG9FY2hhcnRzXCJcclxuaW1wb3J0IFwiLi4vLi4vdG90YWxGYWN0b3J5L2RvRWNoYXJ0c1wiXHJcblxyXG5pbXBvcnQge1Jlc3BvbnNlUmVzdWx0fSBmcm9tIFwiLi4vLi4vLi4vLi4vY29yZS9wYXJhbXMvcmVzdWx0L1Jlc3BvbnNlUmVzdWx0XCI7XHJcbmltcG9ydCB7U2VhcmNoUmVzcG9uc2UsU2VhcmNoR3JvdXBCeURheX0gZnJvbSBcIi4uLy4uL3RvdGFsRmFjdG9yeS90b3RhbFJlc3BvbnNlXCJcclxuXHJcbmltcG9ydCB7SVRyZWVEYXRhUGFyYW1zLCBUcmVlRGF0YVBhcmFtc30gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kaXJlY3RpdmUvdHJlZS90cmVlLXBhcmFtc1wiO1xyXG5pbXBvcnQge0FyZWFFeH0gZnJvbSBcIi4uLy4uLy4uLy4uL2NvcmUvZW50aXR5L2V4L0FyZWFFeFwiO1xyXG5pbXBvcnQge0lBcmVhU2VydmljZX0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zZXJ2aWNlcy9hcmVhLnNlcnZpY2VcIjtcclxuaW1wb3J0ICcuLi8uLi8uLi9jb21tb24vc2VydmljZXMvYXJlYS5zZXJ2aWNlJztcclxuXHJcbmltcG9ydCBcImFuZ3VsYXJcIjtcclxuaW1wb3J0IFwiZWNoYXJ0c1wiO1xyXG5kZWNsYXJlIGxldCByZXF1aXJlOiBhbnk7XHJcbmxldCBlY2hhcnRzID0gcmVxdWlyZShcImVjaGFydHNcIik7XHJcblxyXG5jbGFzcyBTZWFyY2hQYXJhbXMge1xyXG4gICAgYXJlYUNvZGU6IHN0cmluZztcclxuICAgIGR1cmF0aW9uOiBzdHJpbmc7XHJcbiAgICBzdGFydFRpbWU6c3RyaW5nO1xyXG4gICAgZW5kVGltZTpzdHJpbmc7XHJcbiAgICBncm91cFR5cGU6c3RyaW5nO1xyXG59XHJcblxyXG5jbGFzcyBUcmVuZFNlYXJjaENvbnRyb2xsZXJ7XHJcbiAgICBzdGF0aWMgJGluamVjdCA9IFsnJHNjb3BlJywgJ3RvdGFsU2VydmljZScsJ2VjaGFydFNlcnZpY2UnLCdhcmVhU2VydmljZScsJyR0aW1lb3V0J107XHJcblxyXG4gICAgLy/moLzlvI/ljJbmlbDmja5cclxuICAgIGZvcm1hdERhdGFMaXN0OkZ1bmN0aW9uO1xyXG5cclxuICAgIC8v5YiH5o2i5LiN5ZCM5pe26Ze05oyJ6ZKuXHJcbiAgICBjaGFuZ2VUaW1lQnRuOkZ1bmN0aW9uO1xyXG5cclxuICAgIC8v5bGV56S66Ieq5a6a5LmJ5pe26Ze05q615pWw5o2uXHJcbiAgICBzaG93Q3VzdG9tVGltZTpGdW5jdGlvbjtcclxuXHJcbiAgICAvL+WMuuWfn+agkVxyXG4gICAgYXJlYVRyZWVEYXRhUGFyYW1zOklUcmVlRGF0YVBhcmFtczxBcmVhRXg+O1xyXG4gICAgLy/lsZXnpLrljLrln5/moJFcclxuICAgIGlzU2hvd0FyZWFUcmVlOmJvb2xlYW47XHJcblxyXG4gICAgLy/lvIDlp4vml7bpl7RcclxuICAgIHN0YXJ0VGltZTpzdHJpbmc7XHJcbiAgICAvL+e7k+adn+aXtumXtFxyXG4gICAgZW5kVGltZTpzdHJpbmc7XHJcbiAgICAvL+WMuuWfn+WQjVxyXG4gICAgYXJlYU5hbWU6c3RyaW5nO1xyXG4gICAgLy/ljLrln59jb2RlXHJcbiAgICBhcmVhQ29kZTpzdHJpbmc7XHJcbiAgICAvL+aXtumXtOautVxyXG4gICAgZHVyYXRpb246c3RyaW5nO1xyXG5cclxuICAgIC8v5peg5pWw5o2u5pe25bGV56S6XHJcbiAgICBpc05vRGF0YTpib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCRzY29wZTogYW55LCB0b3RhbFNlcnZpY2U6IElUb3RhbFNlcnZpY2UsIGVjaGFydFNlcnZpY2U6SUVjaGFydFNlcnZpY2UsYXJlYVNlcnZpY2U6SUFyZWFTZXJ2aWNlLCAkdGltZW91dDphbnkpIHtcclxuICAgICAgICBsZXQgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2bS5mb3JtYXREYXRhTGlzdCA9IGZvcm1hdERhdGFMaXN0O1xyXG4gICAgICAgIHZtLmNoYW5nZVRpbWVCdG4gPSBjaGFuZ2VUaW1lQnRuO1xyXG4gICAgICAgIHZtLnNob3dDdXN0b21UaW1lID0gc2hvd0N1c3RvbVRpbWU7XHJcblxyXG4gICAgICAgICR0aW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgIC8v6buY6K6k5YC8XHJcbiAgICAgICAgICAgIHZtLmFyZWFDb2RlID0gJyc7XHJcbiAgICAgICAgICAgIHZtLmR1cmF0aW9uID0gJ1RISVJZX0RBWVMnO1xyXG4gICAgICAgICAgICB2bS5zdGFydFRpbWUgPSAnJztcclxuICAgICAgICAgICAgdm0uZW5kVGltZSA9ICcnO1xyXG4gICAgICAgICAgICB2bS5pc05vRGF0YSA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIOWQkeWQjuWPsOS8oOeahOWPguaVsFxyXG4gICAgICAgIGZ1bmN0aW9uIF9nZXRTZWFyY2hQYXJhbXMoKTpBcnJheTxTZWFyY2hQYXJhbXM+e1xyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gbmV3IFNlYXJjaFBhcmFtcygpO1xyXG5cclxuICAgICAgICAgICAgcmVzdWx0LmFyZWFDb2RlID0gdm0uYXJlYUNvZGU7XHJcbiAgICAgICAgICAgIHJlc3VsdC5kdXJhdGlvbiA9IHZtLmR1cmF0aW9uO1xyXG4gICAgICAgICAgICByZXN1bHQuc3RhcnRUaW1lID0gdm0uc3RhcnRUaW1lO1xyXG4gICAgICAgICAgICByZXN1bHQuZW5kVGltZSA9IHZtLmVuZFRpbWU7XHJcbiAgICAgICAgICAgIHJlc3VsdC5ncm91cFR5cGUgPSBcIkdST1VQX0JZX0RBWVwiO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5Lyg5Y+CJyxyZXN1bHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gW3Jlc3VsdF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+iOt+WPluaVsOaNruWIl+ihqFxyXG4gICAgICAgIGZ1bmN0aW9uIGdldERhdGFMaXN0KCl7XHJcbiAgICAgICAgICAgIHRvdGFsU2VydmljZS5nZXRTZWFyY2hEYXRhTGlzdChfZ2V0U2VhcmNoUGFyYW1zKCkpLnRoZW4oY29tcGxldGUpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBjb21wbGV0ZShyZXA6UmVzcG9uc2VSZXN1bHQ8U2VhcmNoUmVzcG9uc2U+KXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmo4DntKLotovlir/or7fmsYLmiJDlip8nLHJlcCk7XHJcbiAgICAgICAgICAgICAgICBpZihyZXAuY29kZSA9PT0gMjAwICYmIHJlcC5kYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICB2bS5pc05vRGF0YSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdERhdGFMaXN0KHJlcC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmlzTm9EYXRhID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0RGF0YUxpc3QoKTtcclxuXHJcbiAgICAgICAgLy8g5Yid5aeL5YyW5Yy65Z+f5qCRXHJcbiAgICAgICAgdm0uYXJlYVRyZWVEYXRhUGFyYW1zID0gbmV3IFRyZWVEYXRhUGFyYW1zPEFyZWFFeD4oKTtcclxuICAgICAgICB2bS5hcmVhVHJlZURhdGFQYXJhbXMudHJlZUlkID0gJ2FyZWFUcmVlVHJlbmRTZWFyY2gnO1xyXG4gICAgICAgIHZtLmFyZWFUcmVlRGF0YVBhcmFtcy5pc0RlZmF1bHRTZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgdm0uYXJlYVRyZWVEYXRhUGFyYW1zLm9uQ2xpY2sgPSB0cmVlU2VsZWN0Tm9kZTtcclxuXHJcbiAgICAgICAgLy8g6I635Y+W5Yy65Z+f5qCR5pWw5o2uXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0VHJlZUxpc3QoKXtcclxuICAgICAgICAgICAgYXJlYVNlcnZpY2UuZmluZExpc3RUcmVlKCkudGhlbihjb21wbGV0ZSk7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbXBsZXRlKHJlc3VsdDogQXJyYXk8QXJlYUV4Pikge1xyXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmFyZWFUcmVlRGF0YVBhcmFtcy50cmVlRGF0YXMgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0VHJlZUxpc3QoKTtcclxuXHJcbiAgICAgICAgLy8g54K55Ye75b2T5YmN6IqC54K55pe26I635Y+W6IqC54K55L+h5oGvXHJcbiAgICAgICAgZnVuY3Rpb24gdHJlZVNlbGVjdE5vZGUoZXZlbnQ6IE1vdXNlRXZlbnQsIHRyZWVJZDogc3RyaW5nLCB0cmVlTm9kZTogYW55KSB7XHJcbiAgICAgICAgICAgIC8v5Yy65Z+fQ29kZVxyXG4gICAgICAgICAgICB2bS5hcmVhQ29kZSA9IHRyZWVOb2RlLkNvZGU7XHJcbiAgICAgICAgICAgIC8v5Yy65Z+f5ZCNXHJcbiAgICAgICAgICAgIHZtLmFyZWFOYW1lID0gdHJlZU5vZGUuTmFtZTtcclxuICAgICAgICAgICAgdm0uaXNTaG93QXJlYVRyZWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdm0uZHVyYXRpb24gPSAnVEhJUllfREFZUyc7XHJcbiAgICAgICAgICAgIGdldERhdGFMaXN0KCk7XHJcbiAgICAgICAgICAgIC8v5Li65LqG6Kem5Y+R6ISP5qOA5p+lIOabtOaWsOinhuWbvlxyXG4gICAgICAgICAgICAkdGltZW91dCgoKT0+IHtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+eCueWHu+S4jeWQjOaXtumXtOauteaMiemSrlxyXG4gICAgICAgIGZ1bmN0aW9uIGNoYW5nZVRpbWVCdG4oZHVyYXRpb246c3RyaW5nKXtcclxuICAgICAgICAgICAgdm0uZHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+aMiemSricsdm0uZHVyYXRpb24pO1xyXG4gICAgICAgICAgICBnZXREYXRhTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/oh6rlrprkuYnml7bpl7RcclxuICAgICAgICBmdW5jdGlvbiBzaG93Q3VzdG9tVGltZSgpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn6Ieq5a6a5LmJ5pe26Ze05byA5aeLJyx2bS5zdGFydFRpbWUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn6Ieq5a6a5LmJ5pe26Ze057uT5p2fJyx2bS5lbmRUaW1lKTtcclxuICAgICAgICAgICAgdm0uZHVyYXRpb24gPSBcIkNVU1RPTUlaRVwiO1xyXG4gICAgICAgICAgICBnZXREYXRhTGlzdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/mo4DntKLotovlir/lm77ooajphY3nva7muLLmn5NcclxuICAgICAgICBmdW5jdGlvbiBmb3JtYXREYXRhTGlzdChvcmlnaW5hbERhdGE6U2VhcmNoUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgbGV0IHNlYXJjaE51bTpBcnJheTxhbnk+ID0gW107XHJcbiAgICAgICAgICAgIGxldCBhcmVhOkFycmF5PGFueT4gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIG9yaWdpbmFsRGF0YS5HUk9VUF9CWV9EQVkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbTpTZWFyY2hHcm91cEJ5RGF5LCBpbmRleDpudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIGFyZWEucHVzaChpdGVtLnN0ckRhdGUpO1xyXG4gICAgICAgICAgICAgICAgc2VhcmNoTnVtLnB1c2goaXRlbS5yZXRyaWV2YWxOdW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBmb3JtYXREYXRhOm9iamVjdCA9e1xyXG4gICAgICAgICAgICAgICAgY29sb3I6IFsnIzZhZTRkOSddLFxyXG4gICAgICAgICAgICAgICAgLy946L205pWw5o2uXHJcbiAgICAgICAgICAgICAgICB4QXhpc0RhdGE6YXJlYSxcclxuICAgICAgICAgICAgICAgIC8v5pWw5o2uXHJcbiAgICAgICAgICAgICAgICBzaG93RGF0YTpzZWFyY2hOdW1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZWNoYXJ0U2VydmljZS5kcmF3RWNoYXJ0KGVjaGFydFNlcnZpY2UuZWNoYXJ0TGluZUFyZWFPcHRpb24oZm9ybWF0RGF0YSksJ3NlYXJjaC0zJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmFwcC5jb250cm9sbGVyKCd0cmVuZFNlYXJjaENvbnRyb2xsZXInLCBUcmVuZFNlYXJjaENvbnRyb2xsZXIpO1xyXG4iXX0=
