define(["require", "exports", "../../common/app/main.app", "../../common/directive/tree/tree-params", "../../common/portrait-tool"], function (require, exports, main_app_1, tree_params_1, portrait_tool_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var DetailsController = (function () {
        function DetailsController($scope, treeDirectiveService) {
            var _this = this;
            this.$scope = $scope;
            this.treeDirectiveService = treeDirectiveService;
            $scope.$on("$destroy", function () {
                _this.userTreeParams.treeDatas = null;
                _this.userTreeParams = null;
                _this.businessLibExParams.treeDatas = null;
                _this.businessLibExParams = null;
                _this.cameraExParams.treeDatas = null;
                _this.cameraExParams = null;
            });
            this.MyCheck = $scope.MyCheck;
            this.MyTaskModel = $scope.MyTaskModel;
            this.userTreeParams = new tree_params_1.TreeDataParams();
            this.userTreeParams.treeDatas = $scope.UserDatas;
            this.userTreeParams.treeId = portrait_tool_1.default.getUUID();
            this.businessLibExParams = new tree_params_1.TreeDataParams();
            this.businessLibExParams.treeDatas = $scope.BusinessLibDatas;
            this.businessLibExParams.treeId = portrait_tool_1.default.getUUID();
            this.businessLibExParams.treeIdKey = "treeID";
            this.businessLibExParams.treePidKey = "treeParentId";
            this.cameraExParams = new tree_params_1.TreeDataParams();
            this.cameraExParams.treeDatas = $scope.CameraDatas;
            this.cameraExParams.treeId = portrait_tool_1.default.getUUID();
            this.AuditStatusMap = $scope.AuditStatusMap;
            this.TaskTypeMap = $scope.TaskTypeMap;
            this.TaskStatusMap = $scope.TaskStatusMap;
        }
        DetailsController.prototype.save = function () {
        };
        DetailsController.prototype.beforeCheck = function () {
            return false;
        };
        DetailsController.prototype.cancel = function (flag) {
            this.$scope.$emit('details.closePopup', flag);
        };
        DetailsController.prototype.treeInitComplete = function (treeId) {
            switch (treeId) {
                case this.businessLibExParams.treeId:
                    this.defaultCheckBusinessLibNode();
                    break;
                case this.userTreeParams.treeId:
                    this.defaultCheckUserNode();
                    break;
                case this.cameraExParams.treeId:
                    this.defaultCheckCameraNode();
                    break;
            }
        };
        DetailsController.prototype.defaultCheckBusinessLibNode = function () {
            var businessIds = [];
            angular.forEach(this.MyTaskModel.ArrLibIds, function (id) {
                businessIds.push(id);
            });
            this.treeDirectiveService.checkNodesByIds(this.businessLibExParams.treeId, businessIds, this.businessLibExParams.treeIdKey, true);
        };
        DetailsController.prototype.defaultCheckUserNode = function () {
        };
        DetailsController.prototype.defaultCheckCameraNode = function () {
            var cameraIds = [];
            angular.forEach(this.MyTaskModel.CameraParams, function (model) {
                cameraIds.push(model.CameraID);
            });
            this.treeDirectiveService.checkNodesByIds(this.cameraExParams.treeId, cameraIds, this.cameraExParams.treeIdKey, true);
        };
        DetailsController.$inject = ['$scope', 'treeDirectiveService'];
        return DetailsController;
    }());
    main_app_1.app.controller("MyCheckDetailsController", DetailsController);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUvdG9vbE9wdGlvbi9teUNoZWNrL2RldGFpbHMuY29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7SUE4QkE7UUFZSSwyQkFBb0IsTUFBNEIsRUFBVSxvQkFBMkM7WUFBckcsaUJBOEJDO1lBOUJtQixXQUFNLEdBQU4sTUFBTSxDQUFzQjtZQUFVLHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBdUI7WUFDakcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUU7Z0JBQ25CLEtBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztnQkFDckMsS0FBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7Z0JBRTNCLEtBQUksQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO2dCQUMxQyxLQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDO2dCQUVoQyxLQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7Z0JBQ3JDLEtBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO1lBQy9CLENBQUMsQ0FBQyxDQUFDO1lBQ0gsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDO1lBQzlCLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztZQUN0QyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksNEJBQWMsRUFBeUIsQ0FBQztZQUNsRSxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO1lBQ2pELElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxHQUFHLHVCQUFZLENBQUMsT0FBTyxFQUFFLENBQUM7WUFFcEQsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksNEJBQWMsRUFBaUIsQ0FBQztZQUMvRCxJQUFJLENBQUMsbUJBQW1CLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQztZQUM3RCxJ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bGUiOiJtb2R1bGUvdG9vbE9wdGlvbi9teUNoZWNrL2RldGFpbHMuY29udHJvbGxlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXBwfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwcC9tYWluLmFwcFwiO1xyXG5pbXBvcnQge0FuZ3VsYXJTY29wZX0gZnJvbSBcIi4uLy4uL2NvbW1vbi90eXBlcy9iYXNlQW5ndWxhclNjb3BlXCI7XHJcbmltcG9ydCB7TXlDaGVja01vZGVsfSBmcm9tIFwiLi4vLi4vLi4vY29yZS9zZXJ2ZXIvTXlDaGVja01vZGVsXCI7XHJcbmltcG9ydCB7QXVkaXRTdGF0dXN9IGZyb20gJy4uLy4uLy4uL2NvcmUvc2VydmVyL2VudW0vQXVkaXRTdGF0dXMnO1xyXG5pbXBvcnQge1BlcnNvbkV4fSBmcm9tICcuLi8uLi8uLi9jb3JlL2VudGl0eS9leC9QZXJzb25FeCc7XHJcbmltcG9ydCB7QnVzaW5lc3NMaWJFeH0gZnJvbSAnLi4vLi4vLi4vY29yZS9lbnRpdHkvZXgvQnVzaW5lc3NMaWJFeCc7XHJcbmltcG9ydCB7Q2FtZXJhRXh9IGZyb20gJy4uLy4uLy4uL2NvcmUvZW50aXR5L2V4L0NhbWVyYUV4JztcclxuaW1wb3J0IHtUcmVlRGF0YVBhcmFtc30gZnJvbSAnLi4vLi4vY29tbW9uL2RpcmVjdGl2ZS90cmVlL3RyZWUtcGFyYW1zJztcclxuaW1wb3J0IHtCdXNpbmVzc0xpYn0gZnJvbSAnLi4vLi4vLi4vY29yZS9zZXJ2ZXIvUmV0cmlldmFsUmVjb3JkTW9kdWxlJztcclxuaW1wb3J0IFBvcnRyYWl0VG9vbCBmcm9tICcuLi8uLi9jb21tb24vcG9ydHJhaXQtdG9vbCc7XHJcbmltcG9ydCB7QXJlYUV4fSBmcm9tICcuLi8uLi8uLi9jb3JlL2VudGl0eS9leC9BcmVhRXgnO1xyXG5pbXBvcnQge1BlcnNvblRyZWVFeH0gZnJvbSBcIi4uLy4uLy4uL2NvcmUvZW50aXR5L2V4L1BlcnNvblRyZWVFeFwiO1xyXG5pbXBvcnQge1Rhc2tNb2RlbCwgQ2FtZXJhUGFyYW19IGZyb20gJy4uLy4uLy4uL2NvcmUvc2VydmVyL1Rhc2tNb2RlbCc7XHJcbmltcG9ydCB7VmlkZW9UYXNrTW9kZWx9IGZyb20gXCIuLi8uLi8uLi9jb3JlL2VudGl0eS9WaWRlb1N0cnVjdFRhc2tcIjtcclxuaW1wb3J0IHtJVHJlZURpcmVjdGl2ZVNlcnZpY2V9IGZyb20gXCIuLi8uLi9jb21tb24vZGlyZWN0aXZlL3RyZWUvdHJlZS5kaXJlY3RpdmUuc2VydmljZVwiO1xyXG5cclxuZGVjbGFyZSBsZXQgYW5ndWxhcjogYW55O1xyXG5leHBvcnQgdHlwZSBDaGVja1Rhc2tNb2RlbCA9IFRhc2tNb2RlbDtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTXlDaGVja0RldGFpbHNQYXJhbXMgZXh0ZW5kcyBBbmd1bGFyU2NvcGUge1xyXG4gICAgTXlDaGVjazogTXlDaGVja01vZGVsO1xyXG4gICAgTXlUYXNrTW9kZWw6IENoZWNrVGFza01vZGVsO1xyXG4gICAgQXVkaXRTdGF0dXNNYXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XHJcbiAgICBUYXNrVHlwZU1hcDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcclxuICAgIFRhc2tTdGF0dXNNYXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XHJcbiAgICBVc2VyRGF0YXM6IEFycmF5PFBlcnNvblRyZWVFeCB8IEFyZWFFeD47XHJcbiAgICBCdXNpbmVzc0xpYkRhdGFzOiBBcnJheTxCdXNpbmVzc0xpYkV4PjtcclxuICAgIENhbWVyYURhdGFzOiBBcnJheTxDYW1lcmFFeCB8IEFyZWFFeD47XHJcbn1cclxuXHJcbmNsYXNzIERldGFpbHNDb250cm9sbGVyIHtcclxuICAgIHN0YXRpYyAkaW5qZWN0ID0gWyckc2NvcGUnLCAndHJlZURpcmVjdGl2ZVNlcnZpY2UnXTtcclxuICAgIHN1Ym1pdDogRnVuY3Rpb247XHJcbiAgICBNeUNoZWNrOiBNeUNoZWNrTW9kZWw7XHJcbiAgICBNeVRhc2tNb2RlbDogQ2hlY2tUYXNrTW9kZWw7XHJcbiAgICB1c2VyVHJlZVBhcmFtczogVHJlZURhdGFQYXJhbXM8UGVyc29uVHJlZUV4IHwgQXJlYUV4PjtcclxuICAgIGJ1c2luZXNzTGliRXhQYXJhbXM6IFRyZWVEYXRhUGFyYW1zPEJ1c2luZXNzTGliRXg+O1xyXG4gICAgY2FtZXJhRXhQYXJhbXM6IFRyZWVEYXRhUGFyYW1zPENhbWVyYUV4IHwgQXJlYUV4PjtcclxuICAgIEF1ZGl0U3RhdHVzTWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xyXG4gICAgVGFza1R5cGVNYXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XHJcbiAgICBUYXNrU3RhdHVzTWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgJHNjb3BlOiBNeUNoZWNrRGV0YWlsc1BhcmFtcywgcHJpdmF0ZSB0cmVlRGlyZWN0aXZlU2VydmljZTogSVRyZWVEaXJlY3RpdmVTZXJ2aWNlKSB7XHJcbiAgICAgICAgJHNjb3BlLiRvbihcIiRkZXN0cm95XCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy51c2VyVHJlZVBhcmFtcy50cmVlRGF0YXMgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJUcmVlUGFyYW1zID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYnVzaW5lc3NMaWJFeFBhcmFtcy50cmVlRGF0YXMgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmJ1c2luZXNzTGliRXhQYXJhbXMgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYW1lcmFFeFBhcmFtcy50cmVlRGF0YXMgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYUV4UGFyYW1zID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLk15Q2hlY2sgPSAkc2NvcGUuTXlDaGVjaztcclxuICAgICAgICB0aGlzLk15VGFza01vZGVsID0gJHNjb3BlLk15VGFza01vZGVsO1xyXG4gICAgICAgIHRoaXMudXNlclRyZWVQYXJhbXMgPSBuZXcgVHJlZURhdGFQYXJhbXM8UGVyc29uVHJlZUV4IHwgQXJlYUV4PigpO1xyXG4gICAgICAgIHRoaXMudXNlclRyZWVQYXJhbXMudHJlZURhdGFzID0gJHNjb3BlLlVzZXJEYXRhcztcclxuICAgICAgICB0aGlzLnVzZXJUcmVlUGFyYW1zLnRyZWVJZCA9IFBvcnRyYWl0VG9vbC5nZXRVVUlEKCk7XHJcblxyXG4gICAgICAgIHRoaXMuYnVzaW5lc3NMaWJFeFBhcmFtcyA9IG5ldyBUcmVlRGF0YVBhcmFtczxCdXNpbmVzc0xpYkV4PigpO1xyXG4gICAgICAgIHRoaXMuYnVzaW5lc3NMaWJFeFBhcmFtcy50cmVlRGF0YXMgPSAkc2NvcGUuQnVzaW5lc3NMaWJEYXRhcztcclxuICAgICAgICB0aGlzLmJ1c2luZXNzTGliRXhQYXJhbXMudHJlZUlkID0gUG9ydHJhaXRUb29sLmdldFVVSUQoKTtcclxuICAgICAgICB0aGlzLmJ1c2luZXNzTGliRXhQYXJhbXMudHJlZUlkS2V5ID0gXCJ0cmVlSURcIjtcclxuICAgICAgICB0aGlzLmJ1c2luZXNzTGliRXhQYXJhbXMudHJlZVBpZEtleSA9IFwidHJlZVBhcmVudElkXCI7XHJcblxyXG4gICAgICAgIHRoaXMuY2FtZXJhRXhQYXJhbXMgPSBuZXcgVHJlZURhdGFQYXJhbXM8Q2FtZXJhRXg+KCk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmFFeFBhcmFtcy50cmVlRGF0YXMgPSAkc2NvcGUuQ2FtZXJhRGF0YXM7XHJcbiAgICAgICAgdGhpcy5jYW1lcmFFeFBhcmFtcy50cmVlSWQgPSBQb3J0cmFpdFRvb2wuZ2V0VVVJRCgpO1xyXG5cclxuICAgICAgICB0aGlzLkF1ZGl0U3RhdHVzTWFwID0gJHNjb3BlLkF1ZGl0U3RhdHVzTWFwO1xyXG4gICAgICAgIHRoaXMuVGFza1R5cGVNYXAgPSAkc2NvcGUuVGFza1R5cGVNYXA7XHJcbiAgICAgICAgdGhpcy5UYXNrU3RhdHVzTWFwID0gJHNjb3BlLlRhc2tTdGF0dXNNYXA7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZSgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8g5LiN5YWB6K646YCJ5LitXHJcbiAgICBiZWZvcmVDaGVjaygpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuY2VsKGZsYWc/OiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUuJGVtaXQoJ2RldGFpbHMuY2xvc2VQb3B1cCcsIGZsYWcpO1xyXG4gICAgfVxyXG5cclxuICAgIHRyZWVJbml0Q29tcGxldGUodHJlZUlkOiBzdHJpbmcpIHtcclxuICAgICAgICAvLyDmoJHmlbDmja7liqDovb3lrozmiJDmlrnms5UsIOinpuWPkeatpOaWueazleWQjiwg5qC55o2u5qCR5bGV56S655qE57G75Z6L5p2l5bCG57uT54K5Y2hlY2vpgInkuK1cclxuICAgICAgICBzd2l0Y2ggKHRyZWVJZCkge1xyXG4gICAgICAgICAgICBjYXNlIHRoaXMuYnVzaW5lc3NMaWJFeFBhcmFtcy50cmVlSWQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRDaGVja0J1c2luZXNzTGliTm9kZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgdGhpcy51c2VyVHJlZVBhcmFtcy50cmVlSWQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRDaGVja1VzZXJOb2RlKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSB0aGlzLmNhbWVyYUV4UGFyYW1zLnRyZWVJZDpcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdENoZWNrQ2FtZXJhTm9kZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVmYXVsdENoZWNrQnVzaW5lc3NMaWJOb2RlKCkge1xyXG4gICAgICAgIC8vIOetm+mAieWHuuaRhOWDj+acumlkXHJcbiAgICAgICAgbGV0IGJ1c2luZXNzSWRzID0gW10gYXMgQXJyYXk8c3RyaW5nPjtcclxuICAgICAgICBhbmd1bGFyLmZvckVhY2godGhpcy5NeVRhc2tNb2RlbC5BcnJMaWJJZHMsIChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGJ1c2luZXNzSWRzLnB1c2goaWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudHJlZURpcmVjdGl2ZVNlcnZpY2UuY2hlY2tOb2Rlc0J5SWRzKHRoaXMuYnVzaW5lc3NMaWJFeFBhcmFtcy50cmVlSWQsIGJ1c2luZXNzSWRzLCB0aGlzLmJ1c2luZXNzTGliRXhQYXJhbXMudHJlZUlkS2V5LCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlZmF1bHRDaGVja1VzZXJOb2RlKCkge1xyXG4gICAgICAgIC8vIOetm+mAieWHuuaRhOWDj+acumlkXHJcbiAgICAgICAgLy8gbGV0IHVzZXJJZHMgPSBbXSBhcyBBcnJheTxzdHJpbmc+O1xyXG4gICAgICAgIC8vIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLk15VGFza01vZGVsLkNhbWVyYVBhcmFtcywgKG1vZGVsOiBDYW1lcmEpPT57XHJcbiAgICAgICAgLy8gICAgIGNhbWVyYUlkcy5wdXNoKG1vZGVsLklEKTtcclxuICAgICAgICAvLyB9KTtcclxuICAgICAgICAvLyB0aGlzLnRyZWVEaXJlY3RpdmVTZXJ2aWNlLmNoZWNrTm9kZXNCeUlkcyh0aGlzLmNhbWVyYUV4UGFyYW1zLnRyZWVJZCwgY2FtZXJhSWRzLCB0aGlzLmNhbWVyYUV4UGFyYW1zLnRyZWVJZEtleSwgdHJ1ZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZGVmYXVsdENoZWNrQ2FtZXJhTm9kZSgpIHtcclxuICAgICAgICAvLyDnrZvpgInlh7rmkYTlg4/mnLppZFxyXG4gICAgICAgIGxldCBjYW1lcmFJZHMgPSBbXSBhcyBBcnJheTxzdHJpbmc+O1xyXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLk15VGFza01vZGVsLkNhbWVyYVBhcmFtcywgKG1vZGVsOiBDYW1lcmFQYXJhbSkgPT4ge1xyXG4gICAgICAgICAgICBjYW1lcmFJZHMucHVzaChtb2RlbC5DYW1lcmFJRCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50cmVlRGlyZWN0aXZlU2VydmljZS5jaGVja05vZGVzQnlJZHModGhpcy5jYW1lcmFFeFBhcmFtcy50cmVlSWQsIGNhbWVyYUlkcywgdGhpcy5jYW1lcmFFeFBhcmFtcy50cmVlSWRLZXksIHRydWUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5cclxuYXBwLmNvbnRyb2xsZXIoXCJNeUNoZWNrRGV0YWlsc0NvbnRyb2xsZXJcIiwgRGV0YWlsc0NvbnRyb2xsZXIpOyJdfQ==
