define(["require", "exports", "../../common/app/main.app", "jquery", "css!./style/callPoint.css"], function (require, exports, main_app_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var callPoliceController = (function () {
        function callPoliceController($scope, $timeout, $interval, mylayer) {
            var _this = this;
            this.$scope = $scope;
            this.$timeout = $timeout;
            this.$interval = $interval;
            this.mylayer = mylayer;
            this.percent = 90.0;
            this.radius = 60;
            this.lineWidth = 8;
            this.fontSize = 30;
            this.process = this.percent;
            this.leftImg = '../../../images/mock/alarm/alarm1.png';
            this.rightImg = '../../../images/mock/alarm/alarm2.png';
            this.layerId = $scope.ID;
            window.setTimeout(function () {
                _this.canvas = document.getElementById("canvas");
                _this.ctx = _this.canvas.getContext('2d');
                _this.circleX = _this.canvas.width / 2;
                _this.circleY = _this.canvas.height / 2;
                _this.loading();
            });
        }
        callPoliceController.prototype.circle = function (cx, cy, r, canvas) {
            var ctx = canvas;
            ctx.beginPath();
            ctx.moveTo(cx + r, cy);
            ctx.lineWidth = this.lineWidth;
            ctx.strokeStyle = '#383d45';
            ctx.arc(cx, cy, r, 0, Math.PI * 2);
            ctx.closePath();
            ctx.stroke();
        };
        callPoliceController.prototype.exit = function () {
            this.mylayer.close(this.layerId);
        };
        callPoliceController.prototype.sector = function (cx, cy, r, startAngle, endAngle) {
            var ctx = this.ctx;
            ctx.beginPath();
            ctx.lineWidth = this.lineWidth;
            var linGrad = ctx.createLinearGradient(70, 40, 70, 100);
            linGrad.addColorStop(0.0, '#fcaa01');
            linGrad.addColorStop(1.0, '#1cbe6f');
            ctx.strokeStyle = linGrad;
            ctx.lineCap = 'round';
            ctx.arc(cx, cy, r, startAngle * (Math.PI / 180.0) + (Math.PI * 1.5), endAngle * (Math.PI / 180.0) + (Math.PI * 1.5));
            ctx.stroke();
        };
        callPoliceController.prototype.loading = function () {
            var ctx = this.ctx;
            ctx.clearRect(0, 0, this.circleX * 2, this.circleY * 2);
            ctx.font = this.fontSize + 'px April';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = '#fff';
            ctx.fillText(parseFloat(this.process).toFixed(0) + '%', this.circleX, this.circleY);
            this.circle(this.circleX, this.circleY, this.radius, ctx);
            this.sector(this.circleX, this.circleY, this.radius, 0, this.process / 100 * 360);
        };
        callPoliceController.$inject = ['$scope', '$timeout', '$interval', 'mylayer'];
        return callPoliceController;
    }());
    main_app_1.app.controller('callPoliceController', callPoliceController);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUvaW5kZXgvQWxhcm1Qcm9tcHQvY2FsbFBvbGljZS5jb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztJQU9BO1FBZUksOEJBQXFCLE1BQVUsRUFBVSxRQUFrQixFQUFVLFNBQWMsRUFBUyxPQUFZO1lBQXhHLGlCQVNDO1lBVG9CLFdBQU0sR0FBTixNQUFNLENBQUk7WUFBVSxhQUFRLEdBQVIsUUFBUSxDQUFVO1lBQVUsY0FBUyxHQUFULFNBQVMsQ0FBSztZQUFTLFlBQU8sR0FBUCxPQUFPLENBQUs7WUFYeEcsWUFBTyxHQUFVLElBQUksQ0FBQztZQUd0QixXQUFNLEdBQVUsRUFBRSxDQUFDO1lBQ25CLGNBQVMsR0FBVSxDQUFDLENBQUM7WUFDckIsYUFBUSxHQUFVLEVBQUUsQ0FBQztZQUNyQixZQUFPLEdBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUczQixZQUFPLEdBQVUsdUNBQXVDLENBQUM7WUFDekQsYUFBUSxHQUFVLHVDQUF1QyxDQUFDO1lBRXRELElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztZQUN6QixNQUFNLENBQUMsVUFBVSxDQUFDO2dCQUNkLEtBQUksQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDaEQsS0FBSSxDQUFDLEdBQUcsR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDeEMsS0FBSSxDQUFDLE9BQU8sR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7Z0JBQ3JDLEtBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2dCQUN0QyxLQUFJLENBQUMsT0FBTyxFQUFFLENBQUE7WUFDbEIsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDO1FBQ0EscUNBQU0sR0FBTixVQUFPLEVBQVMsRUFB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Q3pELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQ3RGLENBQUM7UUF4RU0sNEJBQU8sR0FBRyxDQUFDLFFBQVEsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFDLFNBQVMsQ0FBQyxDQUFDO1FBeUVuRSwyQkFBQztLQTFFRCxBQTBFQyxJQUFBO0lBRUQsY0FBRyxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsRUFBQyxvQkFBb0IsQ0FBQyxDQUFDIiwiZmlsZSI6Im1vZHVsZS9pbmRleC9BbGFybVByb21wdC9jYWxsUG9saWNlLmNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBMaXVibyBvbiAyMDE3LzkvMjIgMDAyMi5cclxuICovXHJcbmltcG9ydCB7YXBwfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwcC9tYWluLmFwcFwiO1xyXG5pbXBvcnQgJ2pxdWVyeSdcclxuZGVjbGFyZSBsZXQgJDogYW55O1xyXG5pbXBvcnQgJ2NzcyEuL3N0eWxlL2NhbGxQb2ludC5jc3MnO1xyXG5jbGFzcyBjYWxsUG9saWNlQ29udHJvbGxlciB7XHJcbiAgICBzdGF0aWMgJGluamVjdCA9IFsnJHNjb3BlJywgJyR0aW1lb3V0JywgJyRpbnRlcnZhbCcsJ215bGF5ZXInXTtcclxuICAgIGNhbnZhczphbnkgO1xyXG4gICAgY3R4OmFueSA7XHJcbiAgICBwZXJjZW50Om51bWJlciA9IDkwLjA7IC8vIOacgOe7iOeZvuWIhuavlFxyXG4gICAgY2lyY2xlWDpudW1iZXI7IC8vIOS4reW/g3jlnZDmoIdcclxuICAgIGNpcmNsZVk6bnVtYmVyOyAvLyDkuK3lv4N55Z2Q5qCHXHJcbiAgICByYWRpdXM6bnVtYmVyID0gNjA7IC8vIOWchueOr+WNiuW+hFxyXG4gICAgbGluZVdpZHRoOm51bWJlciA9IDg7IC8vIOWchuW9oue6v+adoeeahOWuveW6plxyXG4gICAgZm9udFNpemU6bnVtYmVyID0gMzA7IC8vIOWtl+S9k+Wkp+Wwj1xyXG4gICAgcHJvY2VzczphbnkgPSB0aGlzLnBlcmNlbnQ7XHJcbiAgICB0aW1lcjphbnk7XHJcbiAgICBsYXllcklkOnN0cmluZztcclxuICAgIGxlZnRJbWc6c3RyaW5nID0gJy4uLy4uLy4uL2ltYWdlcy9tb2NrL2FsYXJtL2FsYXJtMS5wbmcnO1xyXG4gICAgcmlnaHRJbWc6c3RyaW5nID0gJy4uLy4uLy4uL2ltYWdlcy9tb2NrL2FsYXJtL2FsYXJtMi5wbmcnO1xyXG4gICAgY29uc3RydWN0b3IgKHByaXZhdGUgJHNjb3BlOmFueSwgcHJpdmF0ZSAkdGltZW91dDogRnVuY3Rpb24sIHByaXZhdGUgJGludGVydmFsOiBhbnkscHJpdmF0ZSBteWxheWVyIDphbnkpIHtcclxuICAgICAgICB0aGlzLmxheWVySWQgPSAkc2NvcGUuSUQ7XHJcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcclxuICAgICAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgICAgICB0aGlzLmNpcmNsZVggPSB0aGlzLmNhbnZhcy53aWR0aCAvIDI7XHJcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlWSA9IHRoaXMuY2FudmFzLmhlaWdodCAvIDI7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZGluZygpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAgY2lyY2xlKGN4Om51bWJlciwgY3k6bnVtYmVyLCByOm51bWJlciwgY2FudmFzOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcclxuICAgICAgICBsZXQgY3R4ID0gY2FudmFzO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgubW92ZVRvKGN4ICsgciwgY3kpO1xyXG4gICAgICAgIGN0eC5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aDtcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzM4M2Q0NSc7XHJcbiAgICAgICAgY3R4LmFyYyhjeCwgY3ksIHIsIDAsIE1hdGguUEkgKiAyKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgfVxyXG4gICAgZXhpdCgpe1xyXG4gICAgICAgIHRoaXMubXlsYXllci5jbG9zZSh0aGlzLmxheWVySWQpO1xyXG4gICAgfVxyXG4gICAgIHNlY3RvcihjeDpudW1iZXIsIGN5Om51bWJlciwgcjpudW1iZXIsIHN0YXJ0QW5nbGU6bnVtYmVyLCBlbmRBbmdsZTpudW1iZXIpIHtcclxuICAgICAgICBsZXQgY3R4OmFueSA9IHRoaXMuY3R4O1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIC8vICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oY3gsIGN5ICsgcik7IC8vIOS7juWchuW9ouW6lemDqOW8gOWni+eUu1xyXG4gICAgICAgIGN0eC5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aDtcclxuICAgICAgICAvLyDmuJDlj5joibIgLSDlj6/oh6rlrprkuYlcclxuICAgICAgICAvLyBsZXQgbGluR3JhZCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudChcclxuICAgICAgICAvLyAgICAgdGhpcy5jaXJjbGVYLCBhLCB0aGlzLmNpcmNsZVgsIHRoaXMuY2lyY2xlWSArIHRoaXMucmFkaXVzICsgdGhpcy5saW5lV2lkdGhcclxuICAgICAgICAvLyApO1xyXG4gICAgICAgICBsZXQgbGluR3JhZCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudChcclxuICAgICAgICAgICAgNzAsNDAsNzAsMTAwXHJcbiAgICAgICAgICk7XHJcbiAgICAgICAgbGluR3JhZC5hZGRDb2xvclN0b3AoMC4wLCAnI2ZjYWEwMScpO1xyXG4gICAgICAgIGxpbkdyYWQuYWRkQ29sb3JTdG9wKDEuMCwgJyMxY2JlNmYnKTtcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBsaW5HcmFkO1xyXG4gICAgICAgIC8vIOWchuW8p+S4pOerr+eahOagt+W8j1xyXG4gICAgICAgIGN0eC5saW5lQ2FwID0gJ3JvdW5kJztcclxuICAgICAgICAgLy/lnIblvKdcclxuICAgICAgICBjdHguYXJjKFxyXG4gICAgICAgICAgICBjeCwgY3ksIHIsXHJcbiAgICAgICAgICAgIHN0YXJ0QW5nbGUgKiAoTWF0aC5QSSAvIDE4MC4wKSArIChNYXRoLlBJICoxLjUpLFxyXG4gICAgICAgICAgICBlbmRBbmdsZSAqIChNYXRoLlBJIC8gMTgwLjApICsgKE1hdGguUEkgKiAxLjUpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICB9XHJcbiAgICBsb2FkaW5nICgpIHtcclxuICAgICAgICBsZXQgY3R4OmFueSA9IHRoaXMuY3R4O1xyXG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jaXJjbGVYICogMiwgdGhpcy5jaXJjbGVZICogMik7XHJcbiAgICAgICAgY3R4LmZvbnQgPSB0aGlzLmZvbnRTaXplICsgJ3B4IEFwcmlsJztcclxuICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7XHJcbiAgICAgICAgY3R4LmZpbGxUZXh0KHBhcnNlRmxvYXQodGhpcy5wcm9jZXNzKS50b0ZpeGVkKDApICsgJyUnLCB0aGlzLmNpcmNsZVgsIHRoaXMuY2lyY2xlWSk7XHJcbiAgICAgICAgdGhpcy5jaXJjbGUodGhpcy5jaXJjbGVYLCB0aGlzLmNpcmNsZVksIHRoaXMucmFkaXVzLGN0eCk7XHJcbiAgICAgICAgdGhpcy5zZWN0b3IodGhpcy5jaXJjbGVYLCB0aGlzLmNpcmNsZVksIHRoaXMucmFkaXVzLCAwLCB0aGlzLnByb2Nlc3MgLyAxMDAgKiAzNjApO1xyXG4gICAgfVxyXG59XHJcblxyXG5hcHAuY29udHJvbGxlcignY2FsbFBvbGljZUNvbnRyb2xsZXInLGNhbGxQb2xpY2VDb250cm9sbGVyKTsiXX0=
