define(["require", "exports", "../app/main.app", "css!./faceHandlePopup.css", "../../common/services/toolOption.service", "./comparison.factory", "../../common/factory/layerMsg.factory"], function (require, exports, main_app_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var SelectFaceParams = (function () {
        function SelectFaceParams() {
        }
        return SelectFaceParams;
    }());
    var CutInfo = (function () {
        function CutInfo() {
        }
        return CutInfo;
    }());
    var SelectFacePopupController = (function () {
        function SelectFacePopupController($scope, layer, $timeout, toolOptionService, comparisonFactory, layerDec, i18nFactory) {
            var vm = this;
            $scope.$on("$destroy", function () {
                console.error("销毁了弹出框");
            });
            vm.selectFaceFun = selectFaceFun;
            vm.screenshotImgUrl = "data:image/jpeg;base64," + $scope.data.image;
            vm.file = $scope.file;
            vm.data = $scope.data;
            vm.fromSelectFaceCtrl = $scope.fromSelectFaceCtrl;
            vm.commandType = $scope.commandType;
            vm.detectType = $scope.detectType;
            function frameFace() {
                var $ = angular.element;
                var $screenshotImg = $('.screenshot-img');
                var scale = ($screenshotImg[0].clientWidth / vm.file._info.width).toFixed(4);
                vm.data.faceInfo.forEach(function (item, index) {
                    $timeout(function () {
                        var $selectFaceBox = $(".selectFace-box").eq(index);
                        $selectFaceBox.css({
                            "position": "absolute",
                            "border": "1px solid red",
                            "cursor": "pointer",
                            "top": item.rect.top * scale + "px",
                            "left": item.rect.left * scale + "px",
                            "width": (item.rect.right - item.rect.left) * scale + "px",
                            "height": (item.rect.bottom - item.rect.top) * scale + "px"
                        });
                        $selectFaceBox.hover(function () {
                            $selectFaceBox.css({
                                'background': "rgba(255,0,0,0.4)"
                            });
                        }, function () {
                            $selectFaceBox.css({
                                'background': "rgba(255,0,0,0)"
                            });
                        });
                    });
                });
            }
            frameFace();
            function selectFaceFun(rect) {
                var result = new SelectFaceParams();
                var left = (3 * rect.left - rect.right) / 2 > 0 ? (3 * rect.left - rect.right) / 2 : 0;
                var top = (3 * rect.top - rect.bottom) / 2 > 0 ? (3 * rect.top - rect.bottom) / 2 : 0;
                var width = (rect.right - rect.left) * 2 < vm.file._info.height ? (rect.right - rect.left) * 2 : vm.file._info.height;
                var height = (rect.bottom - rect.top) * 2 < vm.file._info.width ? (rect.bottom - rect.top) * 2 : vm.file._info.width;
                result.detectType = vm.detectType;
                result.commandType = vm.commandType;
                result.imagedata = $scope.data.image;
                result.cutInfo = {
                    right: width,
                    bottom: height,
                    left: left,
                    top: top
                };
                toolOptionService.faceDemarcateDataList(result).then(complete);
                function complete(rep) {
                    if (rep.code === 200) {
                        comparisonFactory.getResponse(rep);
                        $scope.$emit(vm.fromSelectFaceCtrl, rep);
                    }
                    else {
                        layerDec.failInfo(i18nFactory('FDS_00_11_12'));
                    }
                    layer.close($scope.layerIndex);
                }
            }
        }
        SelectFacePopupController.$inject = [
            '$scope',
            'layer',
            '$timeout',
            'toolOptionService',
            'comparisonFactory',
            'layerDec',
            'i18nFactory'
        ];
        return SelectFacePopupController;
    }());
    main_app_1.app.controller('selectFacePopupController', SelectFacePopupController);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUvY29tbW9uL2ZhY2VIYW5kbGVQb3B1cC9zZWxlY3RGYWNlLnBvcHVwLmNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0lBbUJBO1FBQUE7UUFLQSxDQUFDO1FBQUQsdUJBQUM7SUFBRCxDQUxBLEFBS0MsSUFBQTtJQUVEO1FBQUE7UUFLQSxDQUFDO1FBQUQsY0FBQztJQUFELENBTEEsQUFLQyxJQUFBO0lBRUQ7UUFnQ0ksbUNBQ0ksTUFBVyxFQUNYLEtBQVMsRUFDVCxRQUFZLEVBQ1osaUJBQW9DLEVBQ3BDLGlCQUFvQyxFQUNwQyxRQUFrQixFQUNsQixXQUFlO1lBRWYsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDO1lBRWQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUU7Z0JBQ25CLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDNUIsQ0FBQyxDQUFDLENBQUM7WUFFSCxFQUFFLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztZQUVqQyxFQUFFLENBQUMsZ0JBQWdCLEdBQUcseUJBQXlCLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDcEUsRUFBRSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO1lBQ3RCLEVBQUUsQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztZQUN0QixFQUFFLENBQUMsa0JBQWtCLEdBQUcsTUFBTSxDQUFDLGtCQUFrQixDQUFDO1lBQ2xELEVBQUUsQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztZQUNwQyxFQUFFLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7WUFHbEM7Z0JBQ0ksSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztnQkFDeEIsSUFBSSxjQUFjLEdBQU8sQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUM7Z0JBRTlDLElBQUksS0FBSyxHQUFPLENBQUMs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QUFtQjtZQUNuQixVQUFVO1lBQ1YsYUFBYTtTQUNoQixDQUFDO1FBa0hOLGdDQUFDO0tBM0hELEFBMkhDLElBQUE7SUFFRCxjQUFHLENBQUMsVUFBVSxDQUFDLDJCQUEyQixFQUFFLHlCQUF5QixDQUFDLENBQUMiLCJmaWxlIjoibW9kdWxlL2NvbW1vbi9mYWNlSGFuZGxlUG9wdXAvc2VsZWN0RmFjZS5wb3B1cC5jb250cm9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgZGVsbCBvbiAyMDE3LzcvMTQuXHJcbiAqL1xyXG5pbXBvcnQge2FwcH0gZnJvbSBcIi4uL2FwcC9tYWluLmFwcFwiO1xyXG5pbXBvcnQgXCJjc3MhLi9mYWNlSGFuZGxlUG9wdXAuY3NzXCI7XHJcbmltcG9ydCB7SVRvb2xPcHRpb25TZXJ2aWNlfSBmcm9tIFwiLi4vc2VydmljZXMvdG9vbE9wdGlvbi5zZXJ2aWNlXCJcclxuaW1wb3J0ICBcIi4uLy4uL2NvbW1vbi9zZXJ2aWNlcy90b29sT3B0aW9uLnNlcnZpY2VcIlxyXG5cclxuaW1wb3J0IHtJQ29tcGFyaXNvbkZhY3Rvcnl9IGZyb20gXCIuL2NvbXBhcmlzb24uZmFjdG9yeVwiXHJcbmltcG9ydCBcIi4vY29tcGFyaXNvbi5mYWN0b3J5XCJcclxuXHJcbmltcG9ydCB7UmVzcG9uc2VSZXN1bHR9IGZyb20gXCIuLi8uLi8uLi9jb3JlL3BhcmFtcy9yZXN1bHQvUmVzcG9uc2VSZXN1bHRcIjtcclxuaW1wb3J0IHtGYWNlQ29tcGFyaXNvbn0gZnJvbSBcIi4vY29tcGFyaXNvbk1vZGVsXCJcclxuXHJcbmltcG9ydCB7SUxheWVyRGVjfSBmcm9tIFwiLi4vLi4vY29tbW9uL2ZhY3RvcnkvbGF5ZXJNc2cuZmFjdG9yeVwiXHJcbmltcG9ydCBcIi4uLy4uL2NvbW1vbi9mYWN0b3J5L2xheWVyTXNnLmZhY3RvcnlcIlxyXG5cclxuZGVjbGFyZSBsZXQgYW5ndWxhcjogYW55O1xyXG5cclxuY2xhc3MgU2VsZWN0RmFjZVBhcmFtcyB7XHJcbiAgICBkZXRlY3RUeXBlOiBzdHJpbmc7XHJcbiAgICBjb21tYW5kVHlwZTogc3RyaW5nO1xyXG4gICAgY3V0SW5mbzogQ3V0SW5mbztcclxuICAgIGltYWdlZGF0YTogc3RyaW5nO1xyXG59XHJcblxyXG5jbGFzcyBDdXRJbmZve1xyXG4gICAgYm90dG9tOiBudW1iZXI7XHJcbiAgICBsZWZ0OiBudW1iZXI7XHJcbiAgICB0b3A6IG51bWJlcjtcclxuICAgIHJpZ2h0OiBudW1iZXI7XHJcbn1cclxuXHJcbmNsYXNzIFNlbGVjdEZhY2VQb3B1cENvbnRyb2xsZXIge1xyXG4gICAgc3RhdGljICRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRzY29wZScsXHJcbiAgICAgICAgJ2xheWVyJyxcclxuICAgICAgICAnJHRpbWVvdXQnLFxyXG4gICAgICAgICd0b29sT3B0aW9uU2VydmljZScsXHJcbiAgICAgICAgJ2NvbXBhcmlzb25GYWN0b3J5JyxcclxuICAgICAgICAnbGF5ZXJEZWMnLFxyXG4gICAgICAgICdpMThuRmFjdG9yeSdcclxuICAgIF07XHJcblxyXG4gICAgLy/kvKDlhaXlkI7lj7Dlj4LmlbBcclxuICAgIGNvbW1hbmRUeXBlOnN0cmluZztcclxuICAgIGRldGVjdFR5cGU6c3RyaW5nO1xyXG5cclxuICAgIC8v5bm/5pKt5Yiw54i2Y29udHJvbGxlcuS6i+S7tuWQjVxyXG4gICAgZnJvbVNlbGVjdEZhY2VDdHJsOnN0cmluZztcclxuICAgIC8v5qGG6YCJ55qE5Lq66IS45Zu+54mHXHJcbiAgICBzY3JlZW5zaG90SW1nVXJsOnN0cmluZztcclxuXHJcbiAgICBmaWxlOmFueTtcclxuICAgIGRhdGE6YW55O1xyXG5cclxuICAgIC8v6YCJ5oup5Lq66IS45Lyg5Y+CXHJcbiAgICByaWdodDogbnVtYmVyO1xyXG4gICAgbGVmdDogbnVtYmVyO1xyXG4gICAgdG9wOiBudW1iZXI7XHJcbiAgICBib3R0b206IG51bWJlcjtcclxuXHJcbiAgICAvL+mAieaLqeS6uuiEuFxyXG4gICAgc2VsZWN0RmFjZUZ1bjpGdW5jdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAkc2NvcGU6IGFueSxcclxuICAgICAgICBsYXllcjphbnksXHJcbiAgICAgICAgJHRpbWVvdXQ6YW55LFxyXG4gICAgICAgIHRvb2xPcHRpb25TZXJ2aWNlOklUb29sT3B0aW9uU2VydmljZSxcclxuICAgICAgICBjb21wYXJpc29uRmFjdG9yeTpJQ29tcGFyaXNvbkZhY3RvcnksXHJcbiAgICAgICAgbGF5ZXJEZWM6SUxheWVyRGVjLFxyXG4gICAgICAgIGkxOG5GYWN0b3J5OmFueVxyXG4gICAgKSB7XHJcbiAgICAgICAgbGV0IHZtID0gdGhpcztcclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbihcIiRkZXN0cm95XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIumUgOavgeS6huW8ueWHuuahhlwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdm0uc2VsZWN0RmFjZUZ1biA9IHNlbGVjdEZhY2VGdW47XHJcbiAgICAgICAgLy/mjqXmlLbniLbkvZznlKjln5/lj4LmlbBcclxuICAgICAgICB2bS5zY3JlZW5zaG90SW1nVXJsID0gXCJkYXRhOmltYWdlL2pwZWc7YmFzZTY0LFwiICsgJHNjb3BlLmRhdGEuaW1hZ2U7XHJcbiAgICAgICAgdm0uZmlsZSA9ICRzY29wZS5maWxlO1xyXG4gICAgICAgIHZtLmRhdGEgPSAkc2NvcGUuZGF0YTtcclxuICAgICAgICB2bS5mcm9tU2VsZWN0RmFjZUN0cmwgPSAkc2NvcGUuZnJvbVNlbGVjdEZhY2VDdHJsO1xyXG4gICAgICAgIHZtLmNvbW1hbmRUeXBlID0gJHNjb3BlLmNvbW1hbmRUeXBlO1xyXG4gICAgICAgIHZtLmRldGVjdFR5cGUgPSAkc2NvcGUuZGV0ZWN0VHlwZTtcclxuXHJcbiAgICAgICAgLyo9PT09PT09PeahhuWHuuS6uuiEuD09PT09PT09Ki9cclxuICAgICAgICBmdW5jdGlvbiBmcmFtZUZhY2UoKXtcclxuICAgICAgICAgICAgbGV0ICQgPSBhbmd1bGFyLmVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGxldCAkc2NyZWVuc2hvdEltZzphbnkgPSAkKCcuc2NyZWVuc2hvdC1pbWcnKTtcclxuICAgICAgICAgICAgLy/mr5TkvotcclxuICAgICAgICAgICAgbGV0IHNjYWxlOmFueSA9ICgkc2NyZWVuc2hvdEltZ1swXS5jbGllbnRXaWR0aCAvIHZtLmZpbGUuX2luZm8ud2lkdGgpLnRvRml4ZWQoNCk7XHJcbiAgICAgICAgICAgIHZtLmRhdGEuZmFjZUluZm8uZm9yRWFjaChmdW5jdGlvbiAoaXRlbTphbnksaW5kZXg6bnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICAkdGltZW91dCgoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCAkc2VsZWN0RmFjZUJveDphbnkgPSAkKFwiLnNlbGVjdEZhY2UtYm94XCIpLmVxKGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAkc2VsZWN0RmFjZUJveC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInBvc2l0aW9uXCI6IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJib3JkZXJcIjogXCIxcHggc29saWQgcmVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY3Vyc29yXCI6XCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidG9wXCI6IGl0ZW0ucmVjdC50b3AgKiBzY2FsZSArIFwicHhcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJsZWZ0XCI6IGl0ZW0ucmVjdC5sZWZ0ICogc2NhbGUgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid2lkdGhcIjogKGl0ZW0ucmVjdC5yaWdodCAtIGl0ZW0ucmVjdC5sZWZ0KSAqIHNjYWxlICsgXCJweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImhlaWdodFwiOiAoaXRlbS5yZWN0LmJvdHRvbSAtIGl0ZW0ucmVjdC50b3ApICogc2NhbGUgKyBcInB4XCJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAkc2VsZWN0RmFjZUJveC5ob3ZlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3RGYWNlQm94LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCc6XCJyZ2JhKDI1NSwwLDAsMC40KVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3RGYWNlQm94LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCc6XCJyZ2JhKDI1NSwwLDAsMClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnJhbWVGYWNlKCk7XHJcblxyXG4gICAgICAgIC8qPT09PT09PT3kurrohLjpgInmi6k9PT09PT09PSovXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0RmFjZUZ1bihyZWN0OkN1dEluZm8pIHtcclxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9ICBuZXcgU2VsZWN0RmFjZVBhcmFtcygpO1xyXG4gICAgICAgICAgICAvL+S8oOWFpeWQjuWPsOWPguaVsCDmlL7lpKfkuIDlgI1cclxuICAgICAgICAgICAgbGV0IGxlZnQgPSAoMyAqIHJlY3QubGVmdCAtIHJlY3QucmlnaHQpIC8gMiA+IDAgPyAoMyAqIHJlY3QubGVmdCAtIHJlY3QucmlnaHQpIC8gMiA6IDA7XHJcbiAgICAgICAgICAgIGxldCB0b3AgPSAoMyAqIHJlY3QudG9wIC0gcmVjdC5ib3R0b20pIC8gMiA+IDAgPyAoMyAqIHJlY3QudG9wIC0gcmVjdC5ib3R0b20pIC8gMiA6IDA7XHJcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSAqIDIgPCB2bS5maWxlLl9pbmZvLmhlaWdodCA/IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KSAqIDIgOiB2bS5maWxlLl9pbmZvLmhlaWdodDtcclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKSAqMiA8IHZtLmZpbGUuX2luZm8ud2lkdGggPyAocmVjdC5ib3R0b20gLSByZWN0LnRvcCkgKjIgOiB2bS5maWxlLl9pbmZvLndpZHRoO1xyXG5cclxuICAgICAgICAgICAgcmVzdWx0LmRldGVjdFR5cGUgPSB2bS5kZXRlY3RUeXBlO1xyXG4gICAgICAgICAgICByZXN1bHQuY29tbWFuZFR5cGUgPSB2bS5jb21tYW5kVHlwZTtcclxuICAgICAgICAgICAgcmVzdWx0LmltYWdlZGF0YSA9ICRzY29wZS5kYXRhLmltYWdlO1xyXG4gICAgICAgICAgICByZXN1bHQuY3V0SW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIHJpZ2h0OiB3aWR0aCxcclxuICAgICAgICAgICAgICAgIGJvdHRvbTogaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgbGVmdDogbGVmdCxcclxuICAgICAgICAgICAgICAgIHRvcDogdG9wXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCflj4LmlbAnLHJlc3VsdCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfkurrohLjpgInmi6nlvIDlp4snKTtcclxuICAgICAgICAgICAgdG9vbE9wdGlvblNlcnZpY2UuZmFjZURlbWFyY2F0ZURhdGFMaXN0KHJlc3VsdCkudGhlbihjb21wbGV0ZSk7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbXBsZXRlKHJlcDogUmVzcG9uc2VSZXN1bHQ8RmFjZUNvbXBhcmlzb24+KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXAuY29kZSA9PT0yMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfkurrohLjpgInmi6nov5Tlm57nu5PmnpwnLCByZXApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBhcmlzb25GYWN0b3J5LmdldFJlc3BvbnNlKHJlcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lsIblvpfliLDmr5Tlr7nnmoRrZXnlm77niYd1cmzlub/mkq3liLDniLbkvZznlKjln59cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQodm0uZnJvbVNlbGVjdEZhY2VDdHJsLCByZXApO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJEZWMuZmFpbEluZm8oaTE4bkZhY3RvcnkoJ0ZEU18wMF8xMV8xMicpKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGF5ZXIuY2xvc2UoJHNjb3BlLmxheWVySW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5hcHAuY29udHJvbGxlcignc2VsZWN0RmFjZVBvcHVwQ29udHJvbGxlcicsIFNlbGVjdEZhY2VQb3B1cENvbnRyb2xsZXIpOyJdfQ==
