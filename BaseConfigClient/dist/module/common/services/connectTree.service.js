define(["require", "exports", "../app/main.app"], function (require, exports, main_app_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var ConnectTreeService = (function () {
        function ConnectTreeService($http, notifyFactory) {
            this.$http = $http;
            this.notifyFunc = notifyFactory.msg({ onlySuccess: true });
        }
        ConnectTreeService.prototype.findAreaCamera = function (searchInput) {
            var keyWord;
            if (searchInput) {
                keyWord = searchInput;
            }
            return this.$http({
                method: "GET",
                url: "/db/tree/findAreaCamera",
                params: { keyword: keyWord }
            }).then(complete);
            function complete(res) {
                var arr = [];
                if (res && res.data) {
                    arr = res.data;
                }
                return arr;
            }
        };
        ConnectTreeService.prototype.findAreaWithPerson = function (keyWord) {
            return this.$http({
                method: 'get',
                url: '/db/tree/findAreaWithPersion',
                params: { keyword: keyWord }
            }).then(complete);
            function complete(res) {
                var arr = [];
                if (res && res.data) {
                    arr = res.data;
                }
                return arr;
            }
        };
        ;
        ConnectTreeService.prototype.findAreaWithUser = function (keyWord) {
            return this.$http({
                method: 'get',
                url: '/db/tree/findAreaWithUser',
                params: { keyword: keyWord }
            }).then(complete);
            function complete(res) {
                var arr = [];
                if (res && res.data) {
                    arr = res.data;
                }
                return arr;
            }
        };
        ;
        ConnectTreeService.prototype.findAreaWithWifi = function (searchInput) {
            var keyWord;
            if (searchInput) {
                keyWord = searchInput;
            }
            return this.$http({
                method: "GET",
                url: "/db/tree/findAreaWithWifi",
                params: { keyword: keyWord }
            }).then(complete);
            function complete(res) {
                var arr = [];
                if (res && res.data) {
                    arr = res.data;
                }
                return arr;
            }
        };
        ConnectTreeService.prototype.findAreaWithRmpgate = function (searchInput) {
            var keyWord;
            if (searchInput) {
                keyWord = searchInput;
            }
            return this.$http({
                method: "GET",
                url: "/db/tree/findAreaWithRmpgate",
                params: { keyword: keyWord }
            }).then(complete);
            function complete(res) {
                var arr = [];
                if (res && res.data) {
                    arr = res.data;
                }
                return arr;
            }
        };
        ConnectTreeService.prototype.findAreaWithElectronicfence = function (searchInput) {
            var keyWord;
            if (searchInput) {
                keyWord = searchInput;
            }
            return this.$http({
                method: "GET",
                url: "/db/tree/findAreaWithElectronicfence",
                params: { keyword: keyWord }
            }).then(complete);
            function complete(res) {
                var arr = [];
                if (res && res.data) {
                    arr = res.data;
                }
                return arr;
            }
        };
        ConnectTreeService.prototype.findAreaWithLamp = function (searchInput) {
            var keyWord;
            if (searchInput) {
                keyWord = searchInput;
            }
            return this.$http({
                method: "GET",
                url: "/db/tree/findAreaWithLamp",
                params: { keyword: keyWord }
            }).then(complete);
            function complete(res) {
                var arr = [];
                if (res && res.data) {
                    arr = res.data;
                }
                return arr;
            }
        };
        ConnectTreeService.prototype.findLampTreeWithCamera = function (searchInput) {
            var keyWord;
            if (searchInput) {
                keyWord = searchInput;
            }
            return this.$http({
                method: "GET",
                url: "/db/tree/findLampTreeWithCamera",
                params: { keyword: keyWord }
            }).then(complete);
            function complete(res) {
                var arr = [];
                if (res && res.data) {
                    arr = res.data;
                }
                return arr;
            }
        };
        ConnectTreeService.prototype.findLampTreeWithElectronicfence = function (searchInput) {
            var keyWord;
            if (searchInput) {
                keyWord = searchInput;
            }
            return this.$http({
                method: "GET",
                url: "/db/tree/findLampTreeWithElectronicfence",
                params: { keyword: keyWord }
            }).then(complete);
            function complete(res) {
                var arr = [];
                if (res && res.data) {
                    arr = res.data;
                }
                return arr;
            }
        };
        ConnectTreeService.prototype.findLampTreeWithWifi = function (searchInput) {
            var keyWord;
            if (searchInput) {
                keyWord = searchInput;
            }
            return this.$http({
                method: "GET",
                url: "/db/tree/findLampTreeWithWifi",
                params: { keyword: keyWord }
            }).then(complete);
            function complete(res) {
                var arr = [];
                if (res && res.data) {
                    arr = res.data;
                }
                return arr;
            }
        };
        ConnectTreeService.prototype.findLampTreeWithRmpGate = function (searchInput) {
            var keyWord;
            if (searchInput) {
                keyWord = searchInput;
            }
            return this.$http({
                method: "GET",
                url: "/db/tree/findLampTreeWithRmpGate",
                params: { keyword: keyWord }
            }).then(complete);
            function complete(res) {
                var arr = [];
                if (res && res.data) {
                    arr = res.data;
                }
                return arr;
            }
        };
        ConnectTreeService.$inject = ['$http', 'notifyFactory'];
        return ConnectTreeService;
    }());
    main_app_1.app
        .service('connectTreeService', ConnectTreeService);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUvY29tbW9uL3NlcnZpY2VzL2Nvbm5lY3RUcmVlLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0lBdUNBO1FBdU5JLDRCQUFZLEtBQVUsRUFBRSxhQUFxQztZQUN6RCxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUNuQixJQUFJLENBQUMsVUFBVSxHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsRUFBQyxXQUFXLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQztRQUM3RCxDQUFDO1FBek5ELDJDQUFjLEdBQWQsVUFBZSxXQUFvQjtZQUMvQixJQUFJLE9BQU8sQ0FBQztZQUNaLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7Z0JBQ2QsT0FBTyxHQUFHLFdBQVcsQ0FBQztZQUMxQixDQUFDO1lBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7Z0JBQ2QsTUFBTSxFQUFFLEtBQUs7Z0JBQ2IsR0FBRyxFQUFFLHlCQUF5QjtnQkFDOUIsTUFBTSxFQUFFLEVBQUMsT0FBTyxFQUFFLE9BQU8sRUFBZTthQUMzQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRWxCLGtCQUFrQixHQUE2QztnQkFDM0QsSUFBSSxHQUFHLEdBQUcsRUFBOEIsQ0FBQztnQkFDekMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUNsQixHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQztnQkFDbkIsQ0FBQztnQkFDRCxNQUFNLENBQUMsR0FBRyxDQUFDO1lBQ2YsQ0FBQztRQUNMLENBQUM7UUFFRCwrQ0FBa0IsR0FBbEIsVUFBbUIsT0FBZTtZQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztnQkFDZCxNQUFNLEVBQUUsS0FBSztnQkFDYixHQUFHLEVBQUUsOEJBQThCO2dCQUNuQyxNQUFNLEVBQUUsRUFBQyxPQUFPLEVB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QUcsR0FBRyxFQUF3QyxDQUFDO2dCQUNuRCxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7b0JBQ2xCLEdBQUcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDO2dCQUNuQixDQUFDO2dCQUNELE1BQU0sQ0FBQyxHQUFHLENBQUM7WUFDZixDQUFDO1FBQ0wsQ0FBQztRQUdNLDBCQUFPLEdBQWtCLENBQUMsT0FBTyxFQUFFLGVBQWUsQ0FBQyxDQUFDO1FBTy9ELHlCQUFDO0tBM05ELEFBMk5DLElBQUE7SUFFRCxjQUFHO1NBQ0UsT0FBTyxDQUFDLG9CQUFvQixFQUFFLGtCQUFrQixDQUFDLENBQUMiLCJmaWxlIjoibW9kdWxlL2NvbW1vbi9zZXJ2aWNlcy9jb25uZWN0VHJlZS5zZXJ2aWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCB7YXBwfSBmcm9tIFwiLi4vYXBwL21haW4uYXBwXCI7XHJcbmltcG9ydCB7QXJlYUV4fSBmcm9tIFwiLi4vLi4vLi4vY29yZS9lbnRpdHkvZXgvQXJlYUV4XCI7XHJcbmltcG9ydCB7Q2FtZXJhRXh9IGZyb20gXCIuLi8uLi8uLi9jb3JlL2VudGl0eS9leC9DYW1lcmFFeFwiO1xyXG5pbXBvcnQge1Jlc3BvbnNlUmVzdWx0fSBmcm9tIFwiLi4vLi4vLi4vY29yZS9wYXJhbXMvcmVzdWx0L1Jlc3BvbnNlUmVzdWx0XCI7XHJcbmltcG9ydCB7VHJlZVBhcmFtc30gZnJvbSBcIi4uLy4uLy4uL2NvcmUvcGFyYW1zL3RyZWUvVHJlZVBhcmFtc1wiO1xyXG5pbXBvcnQge0lSZXNwb25zZU5vdGlmeUZhY3Rvcnl9IGZyb20gXCIuLi9mYWN0b3J5L3Jlc3BvbnNlLm5vdGlmeS5mYWN0b3J5XCI7XHJcbmltcG9ydCB7Um1wR2F0ZUV4fSBmcm9tICcuLi8uLi8uLi9jb3JlL2VudGl0eS9leC9SbXBHYXRlRXgnO1xyXG5pbXBvcnQge1dpZmlFeH0gZnJvbSAnLi4vLi4vLi4vY29yZS9lbnRpdHkvZXgvV2lmaUV4JztcclxuaW1wb3J0IHtFbGVjdHJvbmljRmVuY2VFeH0gZnJvbSAnLi4vLi4vLi4vY29yZS9lbnRpdHkvZXgvRWxlY3Ryb25pY0ZlbmNlRXgnO1xyXG5pbXBvcnQge0xhbXBFeH0gZnJvbSAnLi4vLi4vLi4vY29yZS9lbnRpdHkvZXgvTGFtcEV4JztcclxuaW1wb3J0IHtQZXJzb25UcmVlRXh9IGZyb20gXCIuLi8uLi8uLi9jb3JlL2VudGl0eS9leC9QZXJzb25UcmVlRXhcIjtcclxuaW1wb3J0IHtVc2VyVHJlZUV4fSBmcm9tIFwiLi4vLi4vLi4vY29yZS9lbnRpdHkvZXgvVXNlclRyZWVFeFwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJQ29ubmVjdFRyZWVTZXJ2aWNlIHtcclxuICAgIGZpbmRBcmVhQ2FtZXJhKHNlYXJjaElucHV0Pzogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxBcmVhRXggfCBDYW1lcmFFeD4+O1xyXG5cclxuICAgIGZpbmRBcmVhV2l0aFdpZmkoc2VhcmNoSW5wdXQ/OiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PEFyZWFFeCB8IFdpZmlFeD4+O1xyXG5cclxuICAgIGZpbmRBcmVhV2l0aFJtcGdhdGUgKHNlYXJjaElucHV0Pzogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxBcmVhRXggfCBSbXBHYXRlRXg+PjtcclxuXHJcbiAgICBmaW5kQXJlYVdpdGhFbGVjdHJvbmljZmVuY2UgKHNlYXJjaElucHV0Pzogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxBcmVhRXggfCBFbGVjdHJvbmljRmVuY2VFeD4+O1xyXG5cclxuICAgIGZpbmRBcmVhV2l0aExhbXAgKHNlYXJjaElucHV0Pzogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxBcmVhRXggfCBMYW1wRXg+PjtcclxuXHJcbiAgICBmaW5kQXJlYVdpdGhQZXJzb24oc2VhcmNoSW5wdXQ/OiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PEFyZWFFeCB8IFBlcnNvblRyZWVFeD4+O1xyXG5cclxuICAgIGZpbmRBcmVhV2l0aFVzZXIoc2VhcmNoSW5wdXQ/OnN0cmluZyk6UHJvbWlzZTxBcnJheTxBcmVhRXggfCBVc2VyVHJlZUV4Pj47XHJcblxyXG4gICAgZmluZExhbXBUcmVlV2l0aENhbWVyYSAoc2VhcmNoSW5wdXQ/OiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PEFyZWFFeCB8IENhbWVyYUV4IHwgTGFtcEV4Pj47XHJcblxyXG4gICAgZmluZExhbXBUcmVlV2l0aEVsZWN0cm9uaWNmZW5jZSAoc2VhcmNoSW5wdXQ/OiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PEFyZWFFeCB8IEVsZWN0cm9uaWNGZW5jZUV4IHwgTGFtcEV4Pj47XHJcblxyXG4gICAgZmluZExhbXBUcmVlV2l0aFdpZmkgKHNlYXJjaElucHV0Pzogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxBcmVhRXggfCBXaWZpRXggfCBMYW1wRXg+PjtcclxuXHJcbiAgICBmaW5kTGFtcFRyZWVXaXRoUm1wR2F0ZShzZWFyY2hJbnB1dD86IHN0cmluZyk6IFByb21pc2U8QXJyYXk8QXJlYUV4IHwgUm1wR2F0ZUV4IHwgTGFtcEV4Pj47XHJcblxyXG59XHJcblxyXG5jbGFzcyBDb25uZWN0VHJlZVNlcnZpY2UgaW1wbGVtZW50cyBJQ29ubmVjdFRyZWVTZXJ2aWNlIHtcclxuICAgIGZpbmRBcmVhQ2FtZXJhKHNlYXJjaElucHV0Pzogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxBcmVhRXggfCBDYW1lcmFFeD4+IHtcclxuICAgICAgICBsZXQga2V5V29yZDtcclxuICAgICAgICBpZiAoc2VhcmNoSW5wdXQpIHtcclxuICAgICAgICAgICAga2V5V29yZCA9IHNlYXJjaElucHV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy4kaHR0cCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgdXJsOiBcIi9kYi90cmVlL2ZpbmRBcmVhQ2FtZXJhXCIsXHJcbiAgICAgICAgICAgIHBhcmFtczoge2tleXdvcmQ6IGtleVdvcmR9IGFzIFRyZWVQYXJhbXNcclxuICAgICAgICB9KS50aGVuKGNvbXBsZXRlKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY29tcGxldGUocmVzOiBSZXNwb25zZVJlc3VsdDxBcnJheTxBcmVhRXggfCBDYW1lcmFFeD4+KSB7XHJcbiAgICAgICAgICAgIGxldCBhcnIgPSBbXSBhcyBBcnJheTxBcmVhRXggfCBDYW1lcmFFeD47XHJcbiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGFyciA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbmRBcmVhV2l0aFBlcnNvbihrZXlXb3JkPzpzdHJpbmcpIDpQcm9taXNlPEFycmF5PEFyZWFFeCB8IFBlcnNvblRyZWVFeD4+e1xyXG4gICAgICAgIHJldHVybiB0aGlzLiRodHRwKHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JyxcclxuICAgICAgICAgICAgdXJsOiAnL2RiL3RyZWUvZmluZEFyZWFXaXRoUGVyc2lvbicsXHJcbiAgICAgICAgICAgIHBhcmFtczoge2tleXdvcmQ6IGtleVdvcmR9IGFzIFRyZWVQYXJhbXNcclxuICAgICAgICB9KS50aGVuKGNvbXBsZXRlKTtcclxuICAgICAgICBmdW5jdGlvbiBjb21wbGV0ZShyZXM6IFJlc3BvbnNlUmVzdWx0PEFycmF5PEFyZWFFeCB8IFBlcnNvblRyZWVFeD4+KSB7XHJcbiAgICAgICAgICAgIGxldCBhcnIgPSBbXSBhcyBBcnJheTxBcmVhRXggfCBQZXJzb25UcmVlRXg+O1xyXG4gICAgICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBhcnIgPSByZXMuZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBmaW5kQXJlYVdpdGhVc2VyKGtleVdvcmQ/OnN0cmluZykgOlByb21pc2U8QXJyYXk8QXJlYUV4IHwgVXNlclRyZWVFeD4+e1xyXG4gICAgICAgIHJldHVybiB0aGlzLiRodHRwKHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JyxcclxuICAgICAgICAgICAgdXJsOiAnL2RiL3RyZWUvZmluZEFyZWFXaXRoVXNlcicsXHJcbiAgICAgICAgICAgIHBhcmFtczoge2tleXdvcmQ6IGtleVdvcmR9IGFzIFRyZWVQYXJhbXNcclxuICAgICAgICB9KS50aGVuKGNvbXBsZXRlKTtcclxuICAgICAgICBmdW5jdGlvbiBjb21wbGV0ZShyZXM6IFJlc3BvbnNlUmVzdWx0PEFycmF5PEFyZWFFeCB8IFVzZXJUcmVlRXg+Pikge1xyXG4gICAgICAgICAgICBsZXQgYXJyID0gW10gYXMgQXJyYXk8QXJlYUV4IHwgVXNlclRyZWVFeD47XHJcbiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGFyciA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGZpbmRBcmVhV2l0aFdpZmkoc2VhcmNoSW5wdXQ/OiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PEFyZWFFeCB8IFdpZmlFeD4+IHtcclxuICAgICAgICBsZXQga2V5V29yZDtcclxuICAgICAgICBpZiAoc2VhcmNoSW5wdXQpIHtcclxuICAgICAgICAgICAga2V5V29yZCA9IHNlYXJjaElucHV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy4kaHR0cCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgdXJsOiBcIi9kYi90cmVlL2ZpbmRBcmVhV2l0aFdpZmlcIixcclxuICAgICAgICAgICAgcGFyYW1zOiB7a2V5d29yZDoga2V5V29yZH0gYXMgVHJlZVBhcmFtc1xyXG4gICAgICAgIH0pLnRoZW4oY29tcGxldGUpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjb21wbGV0ZShyZXM6IFJlc3BvbnNlUmVzdWx0PEFycmF5PEFyZWFFeCB8IFdpZmlFeD4+KSB7XHJcbiAgICAgICAgICAgIGxldCBhcnIgPSBbXSBhcyBBcnJheTxBcmVhRXggfCBXaWZpRXg+O1xyXG4gICAgICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBhcnIgPSByZXMuZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYXJyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmaW5kQXJlYVdpdGhSbXBnYXRlKHNlYXJjaElucHV0Pzogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxBcmVhRXggfCBSbXBHYXRlRXg+PiB7XHJcbiAgICAgICAgbGV0IGtleVdvcmQ7XHJcbiAgICAgICAgaWYgKHNlYXJjaElucHV0KSB7XHJcbiAgICAgICAgICAgIGtleVdvcmQgPSBzZWFyY2hJbnB1dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAoe1xyXG5cclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICB1cmw6IFwiL2RiL3RyZWUvZmluZEFyZWFXaXRoUm1wZ2F0ZVwiLFxyXG4gICAgICAgICAgICBwYXJhbXM6IHtrZXl3b3JkOiBrZXlXb3JkfSBhcyBUcmVlUGFyYW1zXHJcbiAgICAgICAgfSkudGhlbihjb21wbGV0ZSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbXBsZXRlKHJlczogUmVzcG9uc2VSZXN1bHQ8QXJyYXk8QXJlYUV4IHwgUm1wR2F0ZUV4Pj4pIHtcclxuICAgICAgICAgICAgbGV0IGFyciA9IFtdIGFzIEFycmF5PEFyZWFFeCB8IFJtcEdhdGVFeD47XHJcbiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGFyciA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbmRBcmVhV2l0aEVsZWN0cm9uaWNmZW5jZShzZWFyY2hJbnB1dD86IHN0cmluZyk6IFByb21pc2U8QXJyYXk8QXJlYUV4IHwgRWxlY3Ryb25pY0ZlbmNlRXg+PiB7XHJcbiAgICAgICAgbGV0IGtleVdvcmQ7XHJcbiAgICAgICAgaWYgKHNlYXJjaElucHV0KSB7XHJcbiAgICAgICAgICAgIGtleVdvcmQgPSBzZWFyY2hJbnB1dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIHVybDogXCIvZGIvdHJlZS9maW5kQXJlYVdpdGhFbGVjdHJvbmljZmVuY2VcIixcclxuICAgICAgICAgICAgcGFyYW1zOiB7a2V5d29yZDoga2V5V29yZH0gYXMgVHJlZVBhcmFtc1xyXG4gICAgICAgIH0pLnRoZW4oY29tcGxldGUpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjb21wbGV0ZShyZXM6IFJlc3BvbnNlUmVzdWx0PEFycmF5PEFyZWFFeCB8IEVsZWN0cm9uaWNGZW5jZUV4Pj4pIHtcclxuICAgICAgICAgICAgbGV0IGFyciA9IFtdIGFzIEFycmF5PEFyZWFFeCB8IEVsZWN0cm9uaWNGZW5jZUV4PjtcclxuICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgYXJyID0gcmVzLmRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFycjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmluZEFyZWFXaXRoTGFtcChzZWFyY2hJbnB1dD86IHN0cmluZyk6IFByb21pc2U8QXJyYXk8QXJlYUV4IHwgTGFtcEV4Pj4ge1xyXG4gICAgICAgIGxldCBrZXlXb3JkO1xyXG4gICAgICAgIGlmIChzZWFyY2hJbnB1dCkge1xyXG4gICAgICAgICAgICBrZXlXb3JkID0gc2VhcmNoSW5wdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLiRodHRwKHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICB1cmw6IFwiL2RiL3RyZWUvZmluZEFyZWFXaXRoTGFtcFwiLFxyXG4gICAgICAgICAgICBwYXJhbXM6IHtrZXl3b3JkOiBrZXlXb3JkfSBhcyBUcmVlUGFyYW1zXHJcbiAgICAgICAgfSkudGhlbihjb21wbGV0ZSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbXBsZXRlKHJlczogUmVzcG9uc2VSZXN1bHQ8QXJyYXk8QXJlYUV4IHwgTGFtcEV4Pj4pIHtcclxuICAgICAgICAgICAgbGV0IGFyciA9IFtdIGFzIEFycmF5PEFyZWFFeCB8IExhbXBFeD47XHJcbiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGFyciA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmaW5kTGFtcFRyZWVXaXRoQ2FtZXJhKHNlYXJjaElucHV0Pzogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxBcmVhRXggfCBDYW1lcmFFeCB8IExhbXBFeD4+IHtcclxuICAgICAgICBsZXQga2V5V29yZDtcclxuICAgICAgICBpZiAoc2VhcmNoSW5wdXQpIHtcclxuICAgICAgICAgICAga2V5V29yZCA9IHNlYXJjaElucHV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy4kaHR0cCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgdXJsOiBcIi9kYi90cmVlL2ZpbmRMYW1wVHJlZVdpdGhDYW1lcmFcIixcclxuICAgICAgICAgICAgcGFyYW1zOiB7a2V5d29yZDoga2V5V29yZH0gYXMgVHJlZVBhcmFtc1xyXG4gICAgICAgIH0pLnRoZW4oY29tcGxldGUpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjb21wbGV0ZShyZXM6IFJlc3BvbnNlUmVzdWx0PEFycmF5PEFyZWFFeCB8IENhbWVyYUV4IHwgTGFtcEV4Pj4pIHtcclxuICAgICAgICAgICAgbGV0IGFyciA9IFtdIGFzIEFycmF5PEFyZWFFeCB8IENhbWVyYUV4IHwgTGFtcEV4PjtcclxuICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgYXJyID0gcmVzLmRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFycjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmluZExhbXBUcmVlV2l0aEVsZWN0cm9uaWNmZW5jZShzZWFyY2hJbnB1dD86IHN0cmluZyk6IFByb21pc2U8QXJyYXk8QXJlYUV4IHwgRWxlY3Ryb25pY0ZlbmNlRXggfCBMYW1wRXg+PiB7XHJcbiAgICAgICAgbGV0IGtleVdvcmQ7XHJcbiAgICAgICAgaWYgKHNlYXJjaElucHV0KSB7XHJcbiAgICAgICAgICAgIGtleVdvcmQgPSBzZWFyY2hJbnB1dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIHVybDogXCIvZGIvdHJlZS9maW5kTGFtcFRyZWVXaXRoRWxlY3Ryb25pY2ZlbmNlXCIsXHJcbiAgICAgICAgICAgIHBhcmFtczoge2tleXdvcmQ6IGtleVdvcmR9IGFzIFRyZWVQYXJhbXNcclxuICAgICAgICB9KS50aGVuKGNvbXBsZXRlKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY29tcGxldGUocmVzOiBSZXNwb25zZVJlc3VsdDxBcnJheTxBcmVhRXggfCBFbGVjdHJvbmljRmVuY2VFeCB8IExhbXBFeD4+KSB7XHJcbiAgICAgICAgICAgIGxldCBhcnIgPSBbXSBhcyBBcnJheTxBcmVhRXggfCBFbGVjdHJvbmljRmVuY2VFeCB8IExhbXBFeD47XHJcbiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGFyciA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbmRMYW1wVHJlZVdpdGhXaWZpKHNlYXJjaElucHV0Pzogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxBcmVhRXggfCBXaWZpRXggfCBMYW1wRXg+PiB7XHJcbiAgICAgICAgbGV0IGtleVdvcmQ7XHJcbiAgICAgICAgaWYgKHNlYXJjaElucHV0KSB7XHJcbiAgICAgICAgICAgIGtleVdvcmQgPSBzZWFyY2hJbnB1dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIHVybDogXCIvZGIvdHJlZS9maW5kTGFtcFRyZWVXaXRoV2lmaVwiLFxyXG4gICAgICAgICAgICBwYXJhbXM6IHtrZXl3b3JkOiBrZXlXb3JkfSBhcyBUcmVlUGFyYW1zXHJcbiAgICAgICAgfSkudGhlbihjb21wbGV0ZSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbXBsZXRlKHJlczogUmVzcG9uc2VSZXN1bHQ8QXJyYXk8QXJlYUV4IHwgV2lmaUV4IHwgTGFtcEV4Pj4pIHtcclxuICAgICAgICAgICAgbGV0IGFyciA9IFtdIGFzIEFycmF5PEFyZWFFeCB8IFdpZmlFeCB8IExhbXBFeD47XHJcbiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGFyciA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbmRMYW1wVHJlZVdpdGhSbXBHYXRlKHNlYXJjaElucHV0Pzogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxBcmVhRXggfCBSbXBHYXRlRXggfCBMYW1wRXg+PiB7XHJcbiAgICAgICAgbGV0IGtleVdvcmQ7XHJcbiAgICAgICAgaWYgKHNlYXJjaElucHV0KSB7XHJcbiAgICAgICAgICAgIGtleVdvcmQgPSBzZWFyY2hJbnB1dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJGh0dHAoe1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIHVybDogXCIvZGIvdHJlZS9maW5kTGFtcFRyZWVXaXRoUm1wR2F0ZVwiLFxyXG4gICAgICAgICAgICBwYXJhbXM6IHtrZXl3b3JkOiBrZXlXb3JkfSBhcyBUcmVlUGFyYW1zXHJcbiAgICAgICAgfSkudGhlbihjb21wbGV0ZSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbXBsZXRlKHJlczogUmVzcG9uc2VSZXN1bHQ8QXJyYXk8QXJlYUV4IHwgUm1wR2F0ZUV4IHwgTGFtcEV4Pj4pIHtcclxuICAgICAgICAgICAgbGV0IGFyciA9IFtdIGFzIEFycmF5PEFyZWFFeCB8IFJtcEdhdGVFeCB8IExhbXBFeD47XHJcbiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGFyciA9IHJlcy5kYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgJGh0dHA6IGFueTtcclxuICAgIHN0YXRpYyAkaW5qZWN0OiBBcnJheTxzdHJpbmc+ID0gWyckaHR0cCcsICdub3RpZnlGYWN0b3J5J107XHJcbiAgICBwcml2YXRlIG5vdGlmeUZ1bmM6IChyZXM6IFJlc3BvbnNlUmVzdWx0PGFueT4pID0+IFJlc3BvbnNlUmVzdWx0PGFueT47XHJcblxyXG4gICAgY29uc3RydWN0b3IoJGh0dHA6IGFueSwgbm90aWZ5RmFjdG9yeTogSVJlc3BvbnNlTm90aWZ5RmFjdG9yeSkge1xyXG4gICAgICAgIHRoaXMuJGh0dHAgPSAkaHR0cDtcclxuICAgICAgICB0aGlzLm5vdGlmeUZ1bmMgPSBub3RpZnlGYWN0b3J5Lm1zZyh7b25seVN1Y2Nlc3M6IHRydWV9KTtcclxuICAgIH1cclxufVxyXG5cclxuYXBwXHJcbiAgICAuc2VydmljZSgnY29ubmVjdFRyZWVTZXJ2aWNlJywgQ29ubmVjdFRyZWVTZXJ2aWNlKTsiXX0=
