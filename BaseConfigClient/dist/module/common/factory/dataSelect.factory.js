define(["require", "exports", "../app/main.app", "moment"], function (require, exports, main_app_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var dataSelectResult = (function () {
        function dataSelectResult() {
        }
        return dataSelectResult;
    }());
    exports.dataSelectResult = dataSelectResult;
    exports.moduleString = {
        Day: "Day",
        Week: "Week",
        Month: "Month",
        Year: "Year",
        ALL: "ALL",
        Custom: "Custom"
    };
    exports.DateSelectEnum = {
        ALL: {
            value: exports.moduleString.ALL,
            text: "全部"
        },
        Day: {
            value: exports.moduleString.Day,
            text: "近一天"
        },
        Week: {
            value: exports.moduleString.Week,
            text: "近一周"
        },
        Month: {
            value: exports.moduleString.Month,
            text: "近一月"
        },
        Year: {
            value: exports.moduleString.Year,
            text: "近一年"
        },
        Custom: {
            value: exports.moduleString.Custom,
            text: "自定义"
        }
    };
    var dataSelectServer = (function () {
        function dataSelectServer() {
        }
        dataSelectServer.prototype.getParamsTime = function (type) {
            var endTime = moment().format();
            var startTime = moment().format();
            switch (type.module) {
                case exports.moduleString.Day:
                    startTime = moment().subtract(1, 'days').format('YYYY-MM-DD 00:00:00');
                    endTime = moment().subtract(1, 'days').format('YYYY-MM-DD 23:59:59');
                    break;
                case exports.moduleString.Week:
                    startTime = moment().subtract(8, 'days').format('YYYY-MM-DD 00:00:00');
                    endTime = moment().subtract(1, 'days').format('YYYY-MM-DD 23:59:59');
                    break;
                case exports.moduleString.Month:
                    startTime = moment().subtract(31, 'days').format('YYYY-MM-DD 00:00:00');
                    endTime = moment().subtract(1, 'days').format('YYYY-MM-DD 23:59:59');
                    break;
                case exports.moduleString.Year:
                    startTime = moment().subtract(12, 'months').format('YYYY-MM-DD 00:00:00');
                    endTime = moment().subtract(1, 'days').format('YYYY-MM-DD 23:59:59');
                    break;
                case exports.moduleString.ALL:
                    startTime = moment().subtract(12, 'months').format('YYYY-MM-DD 00:00:00');
                    endTime = moment().subtract(1, 'days').format('YYYY-MM-DD 23:59:59');
                    break;
                case exports.moduleString.Custom:
                    startTime = type.startTime;
                    endTime = type.endTime;
                default:
                    break;
            }
            return {
                module: type.module == exports.moduleString.ALL ? exports.moduleString.Day : type.module,
                startTime: startTime && startTime.replace('+08:00', '').replace('T', ' '),
                endTime: endTime && endTime.replace('+08:00', '').replace('T', ' ')
            };
        };
        dataSelectServer.prototype.createDayTimeLine = function () {
            var result = [];
            for (var i = 1; i < 25; i++) {
                result.push(i + ":00");
            }
            return result;
        };
        dataSelectServer.prototype.createWeekTimeLine = function () {
            var result = [];
            for (var i = 1; i < 8; i++) {
                var week = moment().subtract(i, 'days').format('DD');
                result.push(week + "\u65E5");
            }
            return result.reverse();
        };
        dataSelectServer.prototype.createMonthTimeLine = function () {
            var result = [];
            for (var i = 1; i < 31; i++) {
                var month = moment().subtract(i, 'days').format('DD');
                result.push(month + "\u65E5");
            }
            return result.reverse();
        };
        dataSelectServer.prototype.createYearTimeLine = function () {
            var result = [];
            for (var i = 1; i < 13; i++) {
                var month = moment().subtract(i, 'month').format('MM');
                result.push(month + "\u6708");
            }
            return result.reverse();
        };
        return dataSelectServer;
    }());
    exports.dataSelectServer = dataSelectServer;
    main_app_1.app.service('dataSelectServer', dataSelectServer);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGUvY29tbW9uL2ZhY3RvcnkvZGF0YVNlbGVjdC5mYWN0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztJQVNBO1FBQUE7UUFJQSxDQUFDO1FBQUQsdUJBQUM7SUFBRCxDQUpBLEFBSUMsSUFBQTtJQUpZLDRDQUFnQjtJQU1oQixRQUFBLFlBQVksR0FBRztRQUN4QixHQUFHLEVBQUUsS0FBSztRQUNWLElBQUksRUFBRSxNQUFNO1FBQ1osS0FBSyxFQUFFLE9BQU87UUFDZCxJQUFJLEVBQUUsTUFBTTtRQUNaLEdBQUcsRUFBRSxLQUFLO1FBQ1YsTUFBTSxFQUFFLFFBQVE7S0FDbkIsQ0FBQztJQUVXLFFBQUEsY0FBYyxHQUFHO1FBQzFCLEdBQUcsRUFBRTtZQUNELEtBQUssRUFBRSxvQkFBWSxDQUFDLEdBQUc7WUFDdkIsSUFBSSxFQUFFLElBQUk7U0FDYjtRQUNELEdBQUcsRUFBRTtZQUNELEtBQUssRUFBRSxvQkFBWSxDQUFDLEdBQUc7WUFDdkIsSUFBSSxFQUFFLEtBQUs7U0FDZDtRQUNELElBQUksRUFBRTtZQUNGLEtBQUssRUFBRSxvQkFBWSxDQUFDLElBQUk7WUFDeEIsSUFBSSxFQUFFLEtBQUs7U0FDZDtRQUNELEtBQUssRUFBRTtZQUNILEtBQUssRUFBRSxvQkFBWSxDQUFDLEtBQUs7WUFDekIsSUFBSSxFQUFFLEtBQUs7U0FDZDtRQUNELElBQUksRUFBRTtZQUNGLEtBQUssRUFBRSxvQkFBWSxDQUFDLElBQUk7WUFDeEIsSUFBSSxFQUFFLEtBQUs7U0FDZDtRQUNELE1BQU0sRUFBRTtZQUNKLEtBQUssRUFBRSxvQkFBWSxDQUFDLE1BQU07WUFDMUIsSUFBSSxFQUFFLEtBQUs7U0FDZDtLQUNKLENBQUE7SUFFRDtRQUlJO1FBQ0EsQ0FBQztRQUVELHdDQUFhLEdBQWIsVUFBYyxJQUFzQjtZQUNoQyxJQUFJLE9BQU8sR0FBVyxNQUFNLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUN4QyxJQUFJLFNBQVMsR0FBVyxN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QUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDMUIsSUFBSSxLQUFLLEdBQUcsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ3ZELE1BQU0sQ0FBQyxJQUFJLENBQUksS0FBSyxXQUFHLENBQUMsQ0FBQTtZQUM1QixDQUFDO1lBQ0QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUM1QixDQUFDO1FBQ0wsdUJBQUM7SUFBRCxDQTlFQSxBQThFQyxJQUFBO0lBOUVZLDRDQUFnQjtJQWdGN0IsY0FBRyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDIiwiZmlsZSI6Im1vZHVsZS9jb21tb24vZmFjdG9yeS9kYXRhU2VsZWN0LmZhY3RvcnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhcHAgfSBmcm9tIFwiLi4vYXBwL21haW4uYXBwXCI7XHJcbmltcG9ydCAnbW9tZW50J1xyXG5cclxuZGVjbGFyZSBsZXQgbW9tZW50OiBhbnk7XHJcblxyXG4vKipcclxuICog566A5Y2V5a+55Zu96ZmF5YyW6L+b6KGM5LqG5LiA5qyh5YyF6KOFXHJcbiAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIGRhdGFTZWxlY3RSZXN1bHQge1xyXG4gICAgc3RhcnRUaW1lOiBzdHJpbmc7XHJcbiAgICBlbmRUaW1lOiBzdHJpbmc7XHJcbiAgICBtb2R1bGU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG1vZHVsZVN0cmluZyA9IHtcclxuICAgIERheTogXCJEYXlcIixcclxuICAgIFdlZWs6IFwiV2Vla1wiLFxyXG4gICAgTW9udGg6IFwiTW9udGhcIixcclxuICAgIFllYXI6IFwiWWVhclwiLFxyXG4gICAgQUxMOiBcIkFMTFwiLFxyXG4gICAgQ3VzdG9tOiBcIkN1c3RvbVwiXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgRGF0ZVNlbGVjdEVudW0gPSB7XHJcbiAgICBBTEw6IHtcclxuICAgICAgICB2YWx1ZTogbW9kdWxlU3RyaW5nLkFMTCxcclxuICAgICAgICB0ZXh0OiBcIuWFqOmDqFwiXHJcbiAgICB9LFxyXG4gICAgRGF5OiB7XHJcbiAgICAgICAgdmFsdWU6IG1vZHVsZVN0cmluZy5EYXksXHJcbiAgICAgICAgdGV4dDogXCLov5HkuIDlpKlcIlxyXG4gICAgfSxcclxuICAgIFdlZWs6IHtcclxuICAgICAgICB2YWx1ZTogbW9kdWxlU3RyaW5nLldlZWssXHJcbiAgICAgICAgdGV4dDogXCLov5HkuIDlkahcIlxyXG4gICAgfSxcclxuICAgIE1vbnRoOiB7XHJcbiAgICAgICAgdmFsdWU6IG1vZHVsZVN0cmluZy5Nb250aCxcclxuICAgICAgICB0ZXh0OiBcIui/keS4gOaciFwiXHJcbiAgICB9LFxyXG4gICAgWWVhcjoge1xyXG4gICAgICAgIHZhbHVlOiBtb2R1bGVTdHJpbmcuWWVhcixcclxuICAgICAgICB0ZXh0OiBcIui/keS4gOW5tFwiXHJcbiAgICB9LFxyXG4gICAgQ3VzdG9tOiB7XHJcbiAgICAgICAgdmFsdWU6IG1vZHVsZVN0cmluZy5DdXN0b20sXHJcbiAgICAgICAgdGV4dDogXCLoh6rlrprkuYlcIlxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgZGF0YVNlbGVjdFNlcnZlciB7XHJcblxyXG4gICAgLy8gc3RhdGljICRpbmplY3QgPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQYXJhbXNUaW1lKHR5cGU6IGRhdGFTZWxlY3RSZXN1bHQpOiBkYXRhU2VsZWN0UmVzdWx0IHtcclxuICAgICAgICBsZXQgZW5kVGltZTogc3RyaW5nID0gbW9tZW50KCkuZm9ybWF0KCk7XHJcbiAgICAgICAgbGV0IHN0YXJ0VGltZTogc3RyaW5nID0gbW9tZW50KCkuZm9ybWF0KCk7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlLm1vZHVsZSkge1xyXG4gICAgICAgICAgICBjYXNlIG1vZHVsZVN0cmluZy5EYXk6XHJcbiAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBtb21lbnQoKS5zdWJ0cmFjdCgxLCAnZGF5cycpLmZvcm1hdCgnWVlZWS1NTS1ERCAwMDowMDowMCcpO1xyXG4gICAgICAgICAgICAgICAgZW5kVGltZSA9IG1vbWVudCgpLnN1YnRyYWN0KDEsICdkYXlzJykuZm9ybWF0KCdZWVlZLU1NLUREIDIzOjU5OjU5Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBtb2R1bGVTdHJpbmcuV2VlazpcclxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IG1vbWVudCgpLnN1YnRyYWN0KDgsICdkYXlzJykuZm9ybWF0KCdZWVlZLU1NLUREIDAwOjAwOjAwJyk7XHJcbiAgICAgICAgICAgICAgICBlbmRUaW1lID0gbW9tZW50KCkuc3VidHJhY3QoMSwgJ2RheXMnKS5mb3JtYXQoJ1lZWVktTU0tREQgMjM6NTk6NTknKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIG1vZHVsZVN0cmluZy5Nb250aDpcclxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IG1vbWVudCgpLnN1YnRyYWN0KDMxLCAnZGF5cycpLmZvcm1hdCgnWVlZWS1NTS1ERCAwMDowMDowMCcpO1xyXG4gICAgICAgICAgICAgICAgZW5kVGltZSA9IG1vbWVudCgpLnN1YnRyYWN0KDEsICdkYXlzJykuZm9ybWF0KCdZWVlZLU1NLUREIDIzOjU5OjU5Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBtb2R1bGVTdHJpbmcuWWVhcjpcclxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IG1vbWVudCgpLnN1YnRyYWN0KDEyLCAnbW9udGhzJykuZm9ybWF0KCdZWVlZLU1NLUREIDAwOjAwOjAwJyk7XHJcbiAgICAgICAgICAgICAgICBlbmRUaW1lID0gbW9tZW50KCkuc3VidHJhY3QoMSwgJ2RheXMnKS5mb3JtYXQoJ1lZWVktTU0tREQgMjM6NTk6NTknKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIG1vZHVsZVN0cmluZy5BTEw6XHJcbiAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBtb21lbnQoKS5zdWJ0cmFjdCgxMiwgJ21vbnRocycpLmZvcm1hdCgnWVlZWS1NTS1ERCAwMDowMDowMCcpO1xyXG4gICAgICAgICAgICAgICAgZW5kVGltZSA9IG1vbWVudCgpLnN1YnRyYWN0KDEsICdkYXlzJykuZm9ybWF0KCdZWVlZLU1NLUREIDIzOjU5OjU5Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBtb2R1bGVTdHJpbmcuQ3VzdG9tOlxyXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gdHlwZS5zdGFydFRpbWU7XHJcbiAgICAgICAgICAgICAgICBlbmRUaW1lID0gdHlwZS5lbmRUaW1lO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG1vZHVsZTogdHlwZS5tb2R1bGUgPT0gbW9kdWxlU3RyaW5nLkFMTCA/IG1vZHVsZVN0cmluZy5EYXkgOiB0eXBlLm1vZHVsZSxcclxuICAgICAgICAgICAgc3RhcnRUaW1lOiBzdGFydFRpbWUgJiYgc3RhcnRUaW1lLnJlcGxhY2UoJyswODowMCcsICcnKS5yZXBsYWNlKCdUJywgJyAnKSxcclxuICAgICAgICAgICAgZW5kVGltZTogZW5kVGltZSAmJiBlbmRUaW1lLnJlcGxhY2UoJyswODowMCcsICcnKS5yZXBsYWNlKCdUJywgJyAnKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVEYXlUaW1lTGluZSgpOiBBcnJheTxzdHJpbmc+IHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gW10gYXMgQXJyYXk8c3RyaW5nPjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDI1OyBpKyspIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goYCR7aX06MDBgKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVdlZWtUaW1lTGluZSgpOiBBcnJheTxzdHJpbmc+IHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gW10gYXMgQXJyYXk8c3RyaW5nPjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgd2VlayA9IG1vbWVudCgpLnN1YnRyYWN0KGksICdkYXlzJykuZm9ybWF0KCdERCcpO1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChgJHt3ZWVrfeaXpWApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQucmV2ZXJzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZU1vbnRoVGltZUxpbmUoKTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdIGFzIEFycmF5PHN0cmluZz47XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCAzMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBtb250aCA9IG1vbWVudCgpLnN1YnRyYWN0KGksICdkYXlzJykuZm9ybWF0KCdERCcpO1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChgJHttb250aH3ml6VgKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0LnJldmVyc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVZZWFyVGltZUxpbmUoKTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdIGFzIEFycmF5PHN0cmluZz47XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCAxMzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBtb250aCA9IG1vbWVudCgpLnN1YnRyYWN0KGksICdtb250aCcpLmZvcm1hdCgnTU0nKTtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goYCR7bW9udGh95pyIYClcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXZlcnNlKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmFwcC5zZXJ2aWNlKCdkYXRhU2VsZWN0U2VydmVyJywgZGF0YVNlbGVjdFNlcnZlcik7XHJcbiJdfQ==
